{"ast":null,"code":"\"use strict\";\n\nvar Declaration = require('./declaration');\n\nvar Resolution = require('./resolution');\n\nvar Transition = require('./transition');\n\nvar Processor = require('./processor');\n\nvar Supports = require('./supports');\n\nvar Browsers = require('./browsers');\n\nvar Selector = require('./selector');\n\nvar AtRule = require('./at-rule');\n\nvar Value = require('./value');\n\nvar utils = require('./utils');\n\nvar vendor = require('postcss').vendor;\n\nSelector.hack(require('./hacks/fullscreen'));\nSelector.hack(require('./hacks/placeholder'));\nDeclaration.hack(require('./hacks/flex'));\nDeclaration.hack(require('./hacks/order'));\nDeclaration.hack(require('./hacks/filter'));\nDeclaration.hack(require('./hacks/grid-end'));\nDeclaration.hack(require('./hacks/animation'));\nDeclaration.hack(require('./hacks/flex-flow'));\nDeclaration.hack(require('./hacks/flex-grow'));\nDeclaration.hack(require('./hacks/flex-wrap'));\nDeclaration.hack(require('./hacks/grid-area'));\nDeclaration.hack(require('./hacks/place-self'));\nDeclaration.hack(require('./hacks/grid-start'));\nDeclaration.hack(require('./hacks/align-self'));\nDeclaration.hack(require('./hacks/appearance'));\nDeclaration.hack(require('./hacks/flex-basis'));\nDeclaration.hack(require('./hacks/mask-border'));\nDeclaration.hack(require('./hacks/align-items'));\nDeclaration.hack(require('./hacks/flex-shrink'));\nDeclaration.hack(require('./hacks/break-props'));\nDeclaration.hack(require('./hacks/color-adjust'));\nDeclaration.hack(require('./hacks/writing-mode'));\nDeclaration.hack(require('./hacks/border-image'));\nDeclaration.hack(require('./hacks/align-content'));\nDeclaration.hack(require('./hacks/border-radius'));\nDeclaration.hack(require('./hacks/block-logical'));\nDeclaration.hack(require('./hacks/grid-template'));\nDeclaration.hack(require('./hacks/inline-logical'));\nDeclaration.hack(require('./hacks/grid-row-align'));\nDeclaration.hack(require('./hacks/transform-decl'));\nDeclaration.hack(require('./hacks/flex-direction'));\nDeclaration.hack(require('./hacks/image-rendering'));\nDeclaration.hack(require('./hacks/background-clip'));\nDeclaration.hack(require('./hacks/text-decoration'));\nDeclaration.hack(require('./hacks/justify-content'));\nDeclaration.hack(require('./hacks/background-size'));\nDeclaration.hack(require('./hacks/grid-row-column'));\nDeclaration.hack(require('./hacks/grid-rows-columns'));\nDeclaration.hack(require('./hacks/grid-column-align'));\nDeclaration.hack(require('./hacks/overscroll-behavior'));\nDeclaration.hack(require('./hacks/grid-template-areas'));\nDeclaration.hack(require('./hacks/text-emphasis-position'));\nDeclaration.hack(require('./hacks/text-decoration-skip-ink'));\nValue.hack(require('./hacks/gradient'));\nValue.hack(require('./hacks/intrinsic'));\nValue.hack(require('./hacks/pixelated'));\nValue.hack(require('./hacks/image-set'));\nValue.hack(require('./hacks/cross-fade'));\nValue.hack(require('./hacks/display-flex'));\nValue.hack(require('./hacks/display-grid'));\nValue.hack(require('./hacks/filter-value'));\nvar declsCache = {};\n\nvar Prefixes = /*#__PURE__*/function () {\n  function Prefixes(data, browsers, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.data = data;\n    this.browsers = browsers;\n    this.options = options;\n\n    var _this$preprocess = this.preprocess(this.select(this.data));\n\n    this.add = _this$preprocess[0];\n    this.remove = _this$preprocess[1];\n    this.transition = new Transition(this);\n    this.processor = new Processor(this);\n  }\n  /**\n     * Return clone instance to remove all prefixes\n     */\n\n\n  var _proto = Prefixes.prototype;\n\n  _proto.cleaner = function cleaner() {\n    if (this.cleanerCache) {\n      return this.cleanerCache;\n    }\n\n    if (this.browsers.selected.length) {\n      var empty = new Browsers(this.browsers.data, []);\n      this.cleanerCache = new Prefixes(this.data, empty, this.options);\n    } else {\n      return this;\n    }\n\n    return this.cleanerCache;\n  }\n  /**\n     * Select prefixes from data, which is necessary for selected browsers\n     */\n  ;\n\n  _proto.select = function select(list) {\n    var _this = this;\n\n    var selected = {\n      add: {},\n      remove: {}\n    };\n\n    var _loop = function _loop(name) {\n      var data = list[name];\n      var add = data.browsers.map(function (i) {\n        var params = i.split(' ');\n        return {\n          browser: params[0] + \" \" + params[1],\n          note: params[2]\n        };\n      });\n      var notes = add.filter(function (i) {\n        return i.note;\n      }).map(function (i) {\n        return _this.browsers.prefix(i.browser) + \" \" + i.note;\n      });\n      notes = utils.uniq(notes);\n      add = add.filter(function (i) {\n        return _this.browsers.isSelected(i.browser);\n      }).map(function (i) {\n        var prefix = _this.browsers.prefix(i.browser);\n\n        if (i.note) {\n          return prefix + \" \" + i.note;\n        } else {\n          return prefix;\n        }\n      });\n      add = _this.sort(utils.uniq(add));\n\n      if (_this.options.flexbox === 'no-2009') {\n        add = add.filter(function (i) {\n          return i.indexOf('2009') === -1;\n        });\n      }\n\n      var all = data.browsers.map(function (i) {\n        return _this.browsers.prefix(i);\n      });\n\n      if (data.mistakes) {\n        all = all.concat(data.mistakes);\n      }\n\n      all = all.concat(notes);\n      all = utils.uniq(all);\n\n      if (add.length) {\n        selected.add[name] = add;\n\n        if (add.length < all.length) {\n          selected.remove[name] = all.filter(function (i) {\n            return add.indexOf(i) === -1;\n          });\n        }\n      } else {\n        selected.remove[name] = all;\n      }\n    };\n\n    for (var name in list) {\n      _loop(name);\n    }\n\n    return selected;\n  }\n  /**\n     * Sort vendor prefixes\n     */\n  ;\n\n  _proto.sort = function sort(prefixes) {\n    return prefixes.sort(function (a, b) {\n      var aLength = utils.removeNote(a).length;\n      var bLength = utils.removeNote(b).length;\n\n      if (aLength === bLength) {\n        return b.length - a.length;\n      } else {\n        return bLength - aLength;\n      }\n    });\n  }\n  /**\n     * Cache prefixes data to fast CSS processing\n     */\n  ;\n\n  _proto.preprocess = function preprocess(selected) {\n    var add = {\n      'selectors': [],\n      '@supports': new Supports(Prefixes, this)\n    };\n\n    for (var name in selected.add) {\n      var prefixes = selected.add[name];\n\n      if (name === '@keyframes' || name === '@viewport') {\n        add[name] = new AtRule(name, prefixes, this);\n      } else if (name === '@resolution') {\n        add[name] = new Resolution(name, prefixes, this);\n      } else if (this.data[name].selector) {\n        add.selectors.push(Selector.load(name, prefixes, this));\n      } else {\n        var props = this.data[name].props;\n\n        if (props) {\n          var value = Value.load(name, prefixes, this);\n\n          for (var _iterator = props, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref = _i.value;\n            }\n\n            var prop = _ref;\n\n            if (!add[prop]) {\n              add[prop] = {\n                values: []\n              };\n            }\n\n            add[prop].values.push(value);\n          }\n        } else {\n          var values = add[name] && add[name].values || [];\n          add[name] = Declaration.load(name, prefixes, this);\n          add[name].values = values;\n        }\n      }\n    }\n\n    var remove = {\n      selectors: []\n    };\n\n    for (var _name in selected.remove) {\n      var _prefixes = selected.remove[_name];\n\n      if (this.data[_name].selector) {\n        var selector = Selector.load(_name, _prefixes);\n\n        for (var _iterator2 = _prefixes, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) break;\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) break;\n            _ref2 = _i2.value;\n          }\n\n          var prefix = _ref2;\n          remove.selectors.push(selector.old(prefix));\n        }\n      } else if (_name === '@keyframes' || _name === '@viewport') {\n        for (var _iterator3 = _prefixes, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n          var _ref3;\n\n          if (_isArray3) {\n            if (_i3 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i3++];\n          } else {\n            _i3 = _iterator3.next();\n            if (_i3.done) break;\n            _ref3 = _i3.value;\n          }\n\n          var _prefix = _ref3;\n\n          var prefixed = \"@\" + _prefix + _name.slice(1);\n\n          remove[prefixed] = {\n            remove: true\n          };\n        }\n      } else if (_name === '@resolution') {\n        remove[_name] = new Resolution(_name, _prefixes, this);\n      } else {\n        var _props = this.data[_name].props;\n\n        if (_props) {\n          var _value = Value.load(_name, [], this);\n\n          for (var _iterator4 = _prefixes, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n            var _ref4;\n\n            if (_isArray4) {\n              if (_i4 >= _iterator4.length) break;\n              _ref4 = _iterator4[_i4++];\n            } else {\n              _i4 = _iterator4.next();\n              if (_i4.done) break;\n              _ref4 = _i4.value;\n            }\n\n            var _prefix2 = _ref4;\n\n            var old = _value.old(_prefix2);\n\n            if (old) {\n              for (var _iterator5 = _props, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n                var _ref5;\n\n                if (_isArray5) {\n                  if (_i5 >= _iterator5.length) break;\n                  _ref5 = _iterator5[_i5++];\n                } else {\n                  _i5 = _iterator5.next();\n                  if (_i5.done) break;\n                  _ref5 = _i5.value;\n                }\n\n                var _prop = _ref5;\n\n                if (!remove[_prop]) {\n                  remove[_prop] = {};\n                }\n\n                if (!remove[_prop].values) {\n                  remove[_prop].values = [];\n                }\n\n                remove[_prop].values.push(old);\n              }\n            }\n          }\n        } else {\n          for (var _iterator6 = _prefixes, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n            var _ref6;\n\n            if (_isArray6) {\n              if (_i6 >= _iterator6.length) break;\n              _ref6 = _iterator6[_i6++];\n            } else {\n              _i6 = _iterator6.next();\n              if (_i6.done) break;\n              _ref6 = _i6.value;\n            }\n\n            var _prefix3 = _ref6;\n            var olds = this.decl(_name).old(_name, _prefix3);\n\n            if (_name === 'align-self') {\n              var a = add[_name] && add[_name].prefixes;\n\n              if (a) {\n                if (_prefix3 === '-webkit- 2009' && a.indexOf('-webkit-') !== -1) {\n                  continue;\n                } else if (_prefix3 === '-webkit-' && a.indexOf('-webkit- 2009') !== -1) {\n                  continue;\n                }\n              }\n            }\n\n            for (var _iterator7 = olds, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {\n              var _ref7;\n\n              if (_isArray7) {\n                if (_i7 >= _iterator7.length) break;\n                _ref7 = _iterator7[_i7++];\n              } else {\n                _i7 = _iterator7.next();\n                if (_i7.done) break;\n                _ref7 = _i7.value;\n              }\n\n              var _prefixed = _ref7;\n\n              if (!remove[_prefixed]) {\n                remove[_prefixed] = {};\n              }\n\n              remove[_prefixed].remove = true;\n            }\n          }\n        }\n      }\n    }\n\n    return [add, remove];\n  }\n  /**\n     * Declaration loader with caching\n     */\n  ;\n\n  _proto.decl = function decl(prop) {\n    var decl = declsCache[prop];\n\n    if (decl) {\n      return decl;\n    } else {\n      declsCache[prop] = Declaration.load(prop);\n      return declsCache[prop];\n    }\n  }\n  /**\n     * Return unprefixed version of property\n     */\n  ;\n\n  _proto.unprefixed = function unprefixed(prop) {\n    var value = this.normalize(vendor.unprefixed(prop));\n\n    if (value === 'flex-direction') {\n      value = 'flex-flow';\n    }\n\n    return value;\n  }\n  /**\n     * Normalize prefix for remover\n     */\n  ;\n\n  _proto.normalize = function normalize(prop) {\n    return this.decl(prop).normalize(prop);\n  }\n  /**\n     * Return prefixed version of property\n     */\n  ;\n\n  _proto.prefixed = function prefixed(prop, prefix) {\n    prop = vendor.unprefixed(prop);\n    return this.decl(prop).prefixed(prop, prefix);\n  }\n  /**\n     * Return values, which must be prefixed in selected property\n     */\n  ;\n\n  _proto.values = function values(type, prop) {\n    var data = this[type];\n    var global = data['*'] && data['*'].values;\n    var values = data[prop] && data[prop].values;\n\n    if (global && values) {\n      return utils.uniq(global.concat(values));\n    } else {\n      return global || values || [];\n    }\n  }\n  /**\n     * Group declaration by unprefixed property to check them\n     */\n  ;\n\n  _proto.group = function group(decl) {\n    var _this2 = this;\n\n    var rule = decl.parent;\n    var index = rule.index(decl);\n    var length = rule.nodes.length;\n    var unprefixed = this.unprefixed(decl.prop);\n\n    var checker = function checker(step, callback) {\n      index += step;\n\n      while (index >= 0 && index < length) {\n        var other = rule.nodes[index];\n\n        if (other.type === 'decl') {\n          if (step === -1 && other.prop === unprefixed) {\n            if (!Browsers.withPrefix(other.value)) {\n              break;\n            }\n          }\n\n          if (_this2.unprefixed(other.prop) !== unprefixed) {\n            break;\n          } else if (callback(other) === true) {\n            return true;\n          }\n\n          if (step === +1 && other.prop === unprefixed) {\n            if (!Browsers.withPrefix(other.value)) {\n              break;\n            }\n          }\n        }\n\n        index += step;\n      }\n\n      return false;\n    };\n\n    return {\n      up: function up(callback) {\n        return checker(-1, callback);\n      },\n      down: function down(callback) {\n        return checker(+1, callback);\n      }\n    };\n  };\n\n  return Prefixes;\n}();\n\nmodule.exports = Prefixes;","map":{"version":3,"sources":["C:/Projects/Trunks/OWP-GIT/owp-fe/node_modules/autoprefixer/lib/prefixes.js"],"names":["Declaration","require","Resolution","Transition","Processor","Supports","Browsers","Selector","AtRule","Value","utils","vendor","hack","declsCache","Prefixes","data","browsers","options","_this$preprocess","preprocess","select","add","remove","transition","processor","_proto","prototype","cleaner","cleanerCache","selected","length","empty","list","_this","_loop","name","map","i","params","split","browser","note","notes","filter","prefix","uniq","isSelected","sort","flexbox","indexOf","all","mistakes","concat","prefixes","a","b","aLength","removeNote","bLength","selector","selectors","push","load","props","value","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref","next","done","prop","values","_name","_prefixes","_iterator2","_isArray2","_i2","_ref2","old","_iterator3","_isArray3","_i3","_ref3","_prefix","prefixed","slice","_props","_value","_iterator4","_isArray4","_i4","_ref4","_prefix2","_iterator5","_isArray5","_i5","_ref5","_prop","_iterator6","_isArray6","_i6","_ref6","_prefix3","olds","decl","_iterator7","_isArray7","_i7","_ref7","_prefixed","unprefixed","normalize","type","global","group","_this2","rule","parent","index","nodes","checker","step","callback","other","withPrefix","up","down","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar Declaration = require('./declaration');\n\nvar Resolution = require('./resolution');\n\nvar Transition = require('./transition');\n\nvar Processor = require('./processor');\n\nvar Supports = require('./supports');\n\nvar Browsers = require('./browsers');\n\nvar Selector = require('./selector');\n\nvar AtRule = require('./at-rule');\n\nvar Value = require('./value');\n\nvar utils = require('./utils');\n\nvar vendor = require('postcss').vendor;\n\nSelector.hack(require('./hacks/fullscreen'));\nSelector.hack(require('./hacks/placeholder'));\nDeclaration.hack(require('./hacks/flex'));\nDeclaration.hack(require('./hacks/order'));\nDeclaration.hack(require('./hacks/filter'));\nDeclaration.hack(require('./hacks/grid-end'));\nDeclaration.hack(require('./hacks/animation'));\nDeclaration.hack(require('./hacks/flex-flow'));\nDeclaration.hack(require('./hacks/flex-grow'));\nDeclaration.hack(require('./hacks/flex-wrap'));\nDeclaration.hack(require('./hacks/grid-area'));\nDeclaration.hack(require('./hacks/place-self'));\nDeclaration.hack(require('./hacks/grid-start'));\nDeclaration.hack(require('./hacks/align-self'));\nDeclaration.hack(require('./hacks/appearance'));\nDeclaration.hack(require('./hacks/flex-basis'));\nDeclaration.hack(require('./hacks/mask-border'));\nDeclaration.hack(require('./hacks/align-items'));\nDeclaration.hack(require('./hacks/flex-shrink'));\nDeclaration.hack(require('./hacks/break-props'));\nDeclaration.hack(require('./hacks/color-adjust'));\nDeclaration.hack(require('./hacks/writing-mode'));\nDeclaration.hack(require('./hacks/border-image'));\nDeclaration.hack(require('./hacks/align-content'));\nDeclaration.hack(require('./hacks/border-radius'));\nDeclaration.hack(require('./hacks/block-logical'));\nDeclaration.hack(require('./hacks/grid-template'));\nDeclaration.hack(require('./hacks/inline-logical'));\nDeclaration.hack(require('./hacks/grid-row-align'));\nDeclaration.hack(require('./hacks/transform-decl'));\nDeclaration.hack(require('./hacks/flex-direction'));\nDeclaration.hack(require('./hacks/image-rendering'));\nDeclaration.hack(require('./hacks/background-clip'));\nDeclaration.hack(require('./hacks/text-decoration'));\nDeclaration.hack(require('./hacks/justify-content'));\nDeclaration.hack(require('./hacks/background-size'));\nDeclaration.hack(require('./hacks/grid-row-column'));\nDeclaration.hack(require('./hacks/grid-rows-columns'));\nDeclaration.hack(require('./hacks/grid-column-align'));\nDeclaration.hack(require('./hacks/overscroll-behavior'));\nDeclaration.hack(require('./hacks/grid-template-areas'));\nDeclaration.hack(require('./hacks/text-emphasis-position'));\nDeclaration.hack(require('./hacks/text-decoration-skip-ink'));\nValue.hack(require('./hacks/gradient'));\nValue.hack(require('./hacks/intrinsic'));\nValue.hack(require('./hacks/pixelated'));\nValue.hack(require('./hacks/image-set'));\nValue.hack(require('./hacks/cross-fade'));\nValue.hack(require('./hacks/display-flex'));\nValue.hack(require('./hacks/display-grid'));\nValue.hack(require('./hacks/filter-value'));\nvar declsCache = {};\n\nvar Prefixes =\n/*#__PURE__*/\nfunction () {\n  function Prefixes(data, browsers, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.data = data;\n    this.browsers = browsers;\n    this.options = options;\n\n    var _this$preprocess = this.preprocess(this.select(this.data));\n\n    this.add = _this$preprocess[0];\n    this.remove = _this$preprocess[1];\n    this.transition = new Transition(this);\n    this.processor = new Processor(this);\n  }\n  /**\n     * Return clone instance to remove all prefixes\n     */\n\n\n  var _proto = Prefixes.prototype;\n\n  _proto.cleaner = function cleaner() {\n    if (this.cleanerCache) {\n      return this.cleanerCache;\n    }\n\n    if (this.browsers.selected.length) {\n      var empty = new Browsers(this.browsers.data, []);\n      this.cleanerCache = new Prefixes(this.data, empty, this.options);\n    } else {\n      return this;\n    }\n\n    return this.cleanerCache;\n  }\n  /**\n     * Select prefixes from data, which is necessary for selected browsers\n     */\n  ;\n\n  _proto.select = function select(list) {\n    var _this = this;\n\n    var selected = {\n      add: {},\n      remove: {}\n    };\n\n    var _loop = function _loop(name) {\n      var data = list[name];\n      var add = data.browsers.map(function (i) {\n        var params = i.split(' ');\n        return {\n          browser: params[0] + \" \" + params[1],\n          note: params[2]\n        };\n      });\n      var notes = add.filter(function (i) {\n        return i.note;\n      }).map(function (i) {\n        return _this.browsers.prefix(i.browser) + \" \" + i.note;\n      });\n      notes = utils.uniq(notes);\n      add = add.filter(function (i) {\n        return _this.browsers.isSelected(i.browser);\n      }).map(function (i) {\n        var prefix = _this.browsers.prefix(i.browser);\n\n        if (i.note) {\n          return prefix + \" \" + i.note;\n        } else {\n          return prefix;\n        }\n      });\n      add = _this.sort(utils.uniq(add));\n\n      if (_this.options.flexbox === 'no-2009') {\n        add = add.filter(function (i) {\n          return i.indexOf('2009') === -1;\n        });\n      }\n\n      var all = data.browsers.map(function (i) {\n        return _this.browsers.prefix(i);\n      });\n\n      if (data.mistakes) {\n        all = all.concat(data.mistakes);\n      }\n\n      all = all.concat(notes);\n      all = utils.uniq(all);\n\n      if (add.length) {\n        selected.add[name] = add;\n\n        if (add.length < all.length) {\n          selected.remove[name] = all.filter(function (i) {\n            return add.indexOf(i) === -1;\n          });\n        }\n      } else {\n        selected.remove[name] = all;\n      }\n    };\n\n    for (var name in list) {\n      _loop(name);\n    }\n\n    return selected;\n  }\n  /**\n     * Sort vendor prefixes\n     */\n  ;\n\n  _proto.sort = function sort(prefixes) {\n    return prefixes.sort(function (a, b) {\n      var aLength = utils.removeNote(a).length;\n      var bLength = utils.removeNote(b).length;\n\n      if (aLength === bLength) {\n        return b.length - a.length;\n      } else {\n        return bLength - aLength;\n      }\n    });\n  }\n  /**\n     * Cache prefixes data to fast CSS processing\n     */\n  ;\n\n  _proto.preprocess = function preprocess(selected) {\n    var add = {\n      'selectors': [],\n      '@supports': new Supports(Prefixes, this)\n    };\n\n    for (var name in selected.add) {\n      var prefixes = selected.add[name];\n\n      if (name === '@keyframes' || name === '@viewport') {\n        add[name] = new AtRule(name, prefixes, this);\n      } else if (name === '@resolution') {\n        add[name] = new Resolution(name, prefixes, this);\n      } else if (this.data[name].selector) {\n        add.selectors.push(Selector.load(name, prefixes, this));\n      } else {\n        var props = this.data[name].props;\n\n        if (props) {\n          var value = Value.load(name, prefixes, this);\n\n          for (var _iterator = props, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref = _i.value;\n            }\n\n            var prop = _ref;\n\n            if (!add[prop]) {\n              add[prop] = {\n                values: []\n              };\n            }\n\n            add[prop].values.push(value);\n          }\n        } else {\n          var values = add[name] && add[name].values || [];\n          add[name] = Declaration.load(name, prefixes, this);\n          add[name].values = values;\n        }\n      }\n    }\n\n    var remove = {\n      selectors: []\n    };\n\n    for (var _name in selected.remove) {\n      var _prefixes = selected.remove[_name];\n\n      if (this.data[_name].selector) {\n        var selector = Selector.load(_name, _prefixes);\n\n        for (var _iterator2 = _prefixes, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) break;\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) break;\n            _ref2 = _i2.value;\n          }\n\n          var prefix = _ref2;\n          remove.selectors.push(selector.old(prefix));\n        }\n      } else if (_name === '@keyframes' || _name === '@viewport') {\n        for (var _iterator3 = _prefixes, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n          var _ref3;\n\n          if (_isArray3) {\n            if (_i3 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i3++];\n          } else {\n            _i3 = _iterator3.next();\n            if (_i3.done) break;\n            _ref3 = _i3.value;\n          }\n\n          var _prefix = _ref3;\n\n          var prefixed = \"@\" + _prefix + _name.slice(1);\n\n          remove[prefixed] = {\n            remove: true\n          };\n        }\n      } else if (_name === '@resolution') {\n        remove[_name] = new Resolution(_name, _prefixes, this);\n      } else {\n        var _props = this.data[_name].props;\n\n        if (_props) {\n          var _value = Value.load(_name, [], this);\n\n          for (var _iterator4 = _prefixes, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n            var _ref4;\n\n            if (_isArray4) {\n              if (_i4 >= _iterator4.length) break;\n              _ref4 = _iterator4[_i4++];\n            } else {\n              _i4 = _iterator4.next();\n              if (_i4.done) break;\n              _ref4 = _i4.value;\n            }\n\n            var _prefix2 = _ref4;\n\n            var old = _value.old(_prefix2);\n\n            if (old) {\n              for (var _iterator5 = _props, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n                var _ref5;\n\n                if (_isArray5) {\n                  if (_i5 >= _iterator5.length) break;\n                  _ref5 = _iterator5[_i5++];\n                } else {\n                  _i5 = _iterator5.next();\n                  if (_i5.done) break;\n                  _ref5 = _i5.value;\n                }\n\n                var _prop = _ref5;\n\n                if (!remove[_prop]) {\n                  remove[_prop] = {};\n                }\n\n                if (!remove[_prop].values) {\n                  remove[_prop].values = [];\n                }\n\n                remove[_prop].values.push(old);\n              }\n            }\n          }\n        } else {\n          for (var _iterator6 = _prefixes, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n            var _ref6;\n\n            if (_isArray6) {\n              if (_i6 >= _iterator6.length) break;\n              _ref6 = _iterator6[_i6++];\n            } else {\n              _i6 = _iterator6.next();\n              if (_i6.done) break;\n              _ref6 = _i6.value;\n            }\n\n            var _prefix3 = _ref6;\n            var olds = this.decl(_name).old(_name, _prefix3);\n\n            if (_name === 'align-self') {\n              var a = add[_name] && add[_name].prefixes;\n\n              if (a) {\n                if (_prefix3 === '-webkit- 2009' && a.indexOf('-webkit-') !== -1) {\n                  continue;\n                } else if (_prefix3 === '-webkit-' && a.indexOf('-webkit- 2009') !== -1) {\n                  continue;\n                }\n              }\n            }\n\n            for (var _iterator7 = olds, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {\n              var _ref7;\n\n              if (_isArray7) {\n                if (_i7 >= _iterator7.length) break;\n                _ref7 = _iterator7[_i7++];\n              } else {\n                _i7 = _iterator7.next();\n                if (_i7.done) break;\n                _ref7 = _i7.value;\n              }\n\n              var _prefixed = _ref7;\n\n              if (!remove[_prefixed]) {\n                remove[_prefixed] = {};\n              }\n\n              remove[_prefixed].remove = true;\n            }\n          }\n        }\n      }\n    }\n\n    return [add, remove];\n  }\n  /**\n     * Declaration loader with caching\n     */\n  ;\n\n  _proto.decl = function decl(prop) {\n    var decl = declsCache[prop];\n\n    if (decl) {\n      return decl;\n    } else {\n      declsCache[prop] = Declaration.load(prop);\n      return declsCache[prop];\n    }\n  }\n  /**\n     * Return unprefixed version of property\n     */\n  ;\n\n  _proto.unprefixed = function unprefixed(prop) {\n    var value = this.normalize(vendor.unprefixed(prop));\n\n    if (value === 'flex-direction') {\n      value = 'flex-flow';\n    }\n\n    return value;\n  }\n  /**\n     * Normalize prefix for remover\n     */\n  ;\n\n  _proto.normalize = function normalize(prop) {\n    return this.decl(prop).normalize(prop);\n  }\n  /**\n     * Return prefixed version of property\n     */\n  ;\n\n  _proto.prefixed = function prefixed(prop, prefix) {\n    prop = vendor.unprefixed(prop);\n    return this.decl(prop).prefixed(prop, prefix);\n  }\n  /**\n     * Return values, which must be prefixed in selected property\n     */\n  ;\n\n  _proto.values = function values(type, prop) {\n    var data = this[type];\n    var global = data['*'] && data['*'].values;\n    var values = data[prop] && data[prop].values;\n\n    if (global && values) {\n      return utils.uniq(global.concat(values));\n    } else {\n      return global || values || [];\n    }\n  }\n  /**\n     * Group declaration by unprefixed property to check them\n     */\n  ;\n\n  _proto.group = function group(decl) {\n    var _this2 = this;\n\n    var rule = decl.parent;\n    var index = rule.index(decl);\n    var length = rule.nodes.length;\n    var unprefixed = this.unprefixed(decl.prop);\n\n    var checker = function checker(step, callback) {\n      index += step;\n\n      while (index >= 0 && index < length) {\n        var other = rule.nodes[index];\n\n        if (other.type === 'decl') {\n          if (step === -1 && other.prop === unprefixed) {\n            if (!Browsers.withPrefix(other.value)) {\n              break;\n            }\n          }\n\n          if (_this2.unprefixed(other.prop) !== unprefixed) {\n            break;\n          } else if (callback(other) === true) {\n            return true;\n          }\n\n          if (step === +1 && other.prop === unprefixed) {\n            if (!Browsers.withPrefix(other.value)) {\n              break;\n            }\n          }\n        }\n\n        index += step;\n      }\n\n      return false;\n    };\n\n    return {\n      up: function up(callback) {\n        return checker(-1, callback);\n      },\n      down: function down(callback) {\n        return checker(+1, callback);\n      }\n    };\n  };\n\n  return Prefixes;\n}();\n\nmodule.exports = Prefixes;"]},"metadata":{},"sourceType":"script"}