{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport throttle from 'lodash/throttle';\nimport { query } from 'owp/api';\nimport { setCommonCodeData } from 'owp/auth/store/actions';\nimport store from 'owp/store';\nimport history from 'owp/history';\n\nvar _dispatch = throttle(function (action) {\n  console.log('OwpCommon _dispatch !!!!!!');\n  store.dispatch(action);\n}, 1000);\n\nvar setCommonCode = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log('OwpCommon setCommonCode !!!!!!');\n\n            _dispatch({\n              type: 'RESET_APP'\n            });\n\n            _context.t0 = _dispatch;\n            _context.t1 = setCommonCodeData;\n            _context.next = 6;\n            return query({\n              url: process.env.REACT_APP_REST_API_URL + '/listIPX_CommonCodeTotalAC' //process.env.REACT_APP_REST_API_URL+\n\n            });\n\n          case 6:\n            _context.t2 = _context.sent;\n            _context.t3 = (0, _context.t1)(_context.t2);\n            (0, _context.t0)(_context.t3);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function setCommonCode() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nsetCommonCode();\nvar token = window.sessionStorage.getItem('jwt_access_token');\nvar localStoragetoken = window.localStorage.getItem('jwt_access_token');\n\nif (process.env.REACT_APP_CLOSELOGOUT_CHECK === 'true') {\n  console.log(\"process.env.REACT_APP_CLOSELOGOUT_CHECK :  \", process.env.REACT_APP_CLOSELOGOUT_CHECK);\n\n  if (window.location.pathname === \"/\" && window.document.referrer === \"\" && token === null && localStoragetoken === null) {\n    //크롬창 닫고, 최초 로그인 화면일 경우\n    //console.log(\" 최초 브라우저 켰을때 \");\n    history.replace('/');\n  } //크롬창 닫기 버튼 눌렀을 경우 자동 로그아웃 처리\n  else if (window.location.pathname !== '/login' && !token) {\n      if (window.location.pathname !== '/login' && !token && !window.document.referrer) {\n        console.log(\"token \", token);\n        console.log('SESSION EXPIRED');\n        history.replace('/logout');\n      }\n    }\n}","map":{"version":3,"sources":["C:/Projects/Trunks/OWP-GIT/owp-fe/node_modules/owp/src/wrapper/OwpCommon.js"],"names":["throttle","query","setCommonCodeData","store","history","_dispatch","action","console","log","dispatch","setCommonCode","type","url","process","env","REACT_APP_REST_API_URL","token","window","sessionStorage","getItem","localStoragetoken","localStorage","REACT_APP_CLOSELOGOUT_CHECK","location","pathname","document","referrer","replace"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,iBAArB;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,OAAOC,KAAP,MAAkB,WAAlB;AACA,OAAOC,OAAP,MAAoB,aAApB;;AAEA,IAAMC,SAAS,GAAGL,QAAQ,CAAC,UAACM,MAAD,EAAY;AACnCC,EAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACAL,EAAAA,KAAK,CAACM,QAAN,CAAeH,MAAf;AACH,CAHyB,EAGvB,IAHuB,CAA1B;;AAKA,IAAMI,aAAa;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAClBH,YAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;;AAEAH,YAAAA,SAAS,CAAC;AACNM,cAAAA,IAAI,EAAE;AADA,aAAD,CAAT;;AAHkB,0BAOlBN,SAPkB;AAAA,0BAQdH,iBARc;AAAA;AAAA,mBASJD,KAAK,CAAC;AACRW,cAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,sBAAZ,GAAqC,4BADlC,CACgE;;AADhE,aAAD,CATD;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbL,aAAa;AAAA;AAAA;AAAA,GAAnB;;AAgBAA,aAAa;AAGb,IAAMM,KAAK,GAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,kBAA9B,CAAd;AACA,IAAMC,iBAAiB,GAAGH,MAAM,CAACI,YAAP,CAAoBF,OAApB,CAA4B,kBAA5B,CAA1B;;AAGA,IAAGN,OAAO,CAACC,GAAR,CAAYQ,2BAAZ,KAA0C,MAA7C,EAAoD;AAChDf,EAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ,EAA0DK,OAAO,CAACC,GAAR,CAAYQ,2BAAtE;;AACA,MAAGL,MAAM,CAACM,QAAP,CAAgBC,QAAhB,KAA4B,GAA5B,IAAmCP,MAAM,CAACQ,QAAP,CAAgBC,QAAhB,KAA6B,EAAhE,IAAsEV,KAAK,KAAK,IAAhF,IAAwFI,iBAAiB,KAAK,IAAjH,EAAuH;AACnH;AACA;AACAhB,IAAAA,OAAO,CAACuB,OAAR,CAAgB,GAAhB;AACH,GAJD,CAKA;AALA,OAMK,IAAGV,MAAM,CAACM,QAAP,CAAgBC,QAAhB,KAA2B,QAA3B,IAAuC,CAACR,KAA3C,EAAiD;AAClD,UAAGC,MAAM,CAACM,QAAP,CAAgBC,QAAhB,KAA2B,QAA3B,IAAqC,CAACR,KAAtC,IAA6C,CAACC,MAAM,CAACQ,QAAP,CAAgBC,QAAjE,EAA0E;AACtEnB,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBQ,KAArB;AACAT,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAJ,QAAAA,OAAO,CAACuB,OAAR,CAAgB,SAAhB;AACH;AAGJ;AACJ","sourcesContent":["import throttle from 'lodash/throttle';\r\nimport { query } from 'owp/api';\r\nimport { setCommonCodeData } from 'owp/auth/store/actions';\r\nimport store from 'owp/store';\r\nimport history from 'owp/history';\r\n\r\nconst _dispatch = throttle((action) => {\r\n    console.log('OwpCommon _dispatch !!!!!!');\r\n    store.dispatch(action);\r\n}, 1000);\r\n\r\nconst setCommonCode = async () => {\r\n    console.log('OwpCommon setCommonCode !!!!!!');\r\n\r\n    _dispatch({\r\n        type: 'RESET_APP',\r\n    });\r\n\r\n    _dispatch(\r\n        setCommonCodeData(\r\n            await query({\r\n                url: process.env.REACT_APP_REST_API_URL + '/listIPX_CommonCodeTotalAC', //process.env.REACT_APP_REST_API_URL+\r\n            })\r\n        )\r\n    );\r\n};\r\n\r\nsetCommonCode();\r\n\r\n\r\nconst token = window.sessionStorage.getItem('jwt_access_token');\r\nconst localStoragetoken = window.localStorage.getItem('jwt_access_token');\r\n\r\n\r\nif(process.env.REACT_APP_CLOSELOGOUT_CHECK==='true'){\r\n    console.log(\"process.env.REACT_APP_CLOSELOGOUT_CHECK :  \",process.env.REACT_APP_CLOSELOGOUT_CHECK);\r\n    if(window.location.pathname ===\"/\" && window.document.referrer === \"\" && token === null && localStoragetoken === null ){\r\n        //크롬창 닫고, 최초 로그인 화면일 경우\r\n        //console.log(\" 최초 브라우저 켰을때 \");\r\n        history.replace('/');\r\n    }\r\n    //크롬창 닫기 버튼 눌렀을 경우 자동 로그아웃 처리\r\n    else if(window.location.pathname!=='/login' && !token){\r\n        if(window.location.pathname!=='/login'&&!token&&!window.document.referrer){\r\n            console.log(\"token \",token);\r\n            console.log('SESSION EXPIRED');\r\n            history.replace('/logout');\r\n        }\r\n\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}