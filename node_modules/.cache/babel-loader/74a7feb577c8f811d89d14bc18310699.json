{"ast":null,"code":"import _classCallCheck from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\src\\\\main\\\\content\\\\login\\\\LoginPWChangeForm.js\";\nimport { TextFieldFormsy } from \"owp/@fuse\";\nimport { Button, Icon, InputAdornment, withStyles } from '@material-ui/core';\nimport Formsy from 'formsy-react';\nimport React, { Component } from 'react';\nimport jwtService from \"owp/jwtService\";\nimport { OwpMessage } from \"owp/wrapper\";\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      width: '100%'\n    }\n  };\n};\n\nvar LoginForm = /*#__PURE__*/function (_Component) {\n  _inherits(LoginForm, _Component);\n\n  var _super = _createSuper(LoginForm);\n\n  function LoginForm() {\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      canSubmit: false\n    };\n    _this.form = React.createRef();\n\n    _this.disableButton = function () {\n      _this.setState({\n        canSubmit: false\n      });\n    };\n\n    _this.enableButton = function () {\n      _this.setState({\n        canSubmit: true\n      });\n    };\n\n    _this.onSubmit = function (model) {\n      model['UserSEQ'] = _this.session.UserSEQ;\n      model['UserID'] = _this.session.UserID;\n      var pw = model.password;\n      var pw_passed = true; // 추후 벨리데이션 처리시에 해당 인자값 확인을 위해\n\n      var SamePass_0 = 0; //동일문자 카운트\n\n      var SamePass_1 = 0; //연속성(+) 카운드\n\n      var SamePass_2 = 0; //연속성(-) 카운드\n\n      for (var i = 0; i < pw.length; i++) {\n        var chr_pass_0 = void 0;\n        var chr_pass_1 = void 0;\n        var chr_pass_2 = void 0;\n\n        if (i >= 2) {\n          chr_pass_0 = pw.charCodeAt(i - 2);\n          chr_pass_1 = pw.charCodeAt(i - 1);\n          chr_pass_2 = pw.charCodeAt(i); //동일문자 카운트\n\n          if (chr_pass_0 === chr_pass_1 && chr_pass_1 === chr_pass_2) {\n            SamePass_0++;\n          } else {\n            SamePass_0 = 0;\n          } //연속성(+) 카운드\n\n\n          if (chr_pass_0 - chr_pass_1 === 1 && chr_pass_1 - chr_pass_2 === 1) {\n            SamePass_1++;\n          } else {\n            SamePass_1 = 0;\n          } //연속성(-) 카운드\n\n\n          if (chr_pass_0 - chr_pass_1 === -1 && chr_pass_1 - chr_pass_2 === -1) {\n            SamePass_2++;\n          } else {\n            SamePass_2 = 0;\n          }\n        }\n\n        if (SamePass_0 > 0) {\n          _this.disableButton();\n\n          pw_passed = false;\n          OwpMessage({\n            message: '동일문자를 3자 이상 연속 입력할 수 없습니다.',\n            //text or html\n            variant: 'error' //success error info warning null\n\n          });\n        }\n\n        if (SamePass_1 > 0 || SamePass_2 > 0) {\n          _this.disableButton();\n\n          pw_passed = false;\n          OwpMessage({\n            message: '동일문자를 3자 이상 연속 입력할 수 없습니다.',\n            //text or html\n            variant: 'error' //success error info warning null\n\n          });\n        }\n\n        if (!pw_passed) {\n          break;\n        }\n      }\n\n      if (pw_passed) {\n        jwtService.updatePw(model).then(function (res) {\n          console.log(\"ResultData...\", res);\n\n          if (res) {\n            if (res.resultCode === \"STATUS_1\") {// OwpMessage({\n              //     message     : '정상 처리 되었습니다.',//text or html\n              //     variant: 'success'//success error info warning null\n              // });\n            }\n\n            _this.props.closeFunc();\n          }\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.session = window.localStorage.getItem('session');\n\n      if (this.session) {\n        this.session = JSON.parse(window.localStorage.getItem('session'));\n        console.log(this.session);\n        this.setState({\n          UserID: this.session['UserID']\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var canSubmit = this.state.canSubmit;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Formsy, {\n        onValidSubmit: this.onSubmit,\n        onValid: this.enableButton,\n        onInvalid: this.disableButton,\n        ref: function ref(form) {\n          return _this2.form = form;\n        },\n        className: \"flex flex-col justify-center w-full\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(TextFieldFormsy, {\n        className: \"mb-16\",\n        type: \"text\",\n        name: \"email\",\n        label: \"\\uC544\\uC774\\uB514\",\n        value: this.state.UserID,\n        InputProps: {\n          readOnly: true,\n          endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n            position: \"end\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 33\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            className: \"text-20\",\n            color: \"action\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 37\n            }\n          }, \"email\"))\n        },\n        variant: \"outlined\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(TextFieldFormsy, {\n        className: \"mb-16\",\n        type: \"password\",\n        name: \"password\",\n        label: \"\\uBCC0\\uACBD \\uD328\\uC2A4\\uC6CC\\uB4DC\",\n        validations: {\n          //minLength: 4,\n          //matchRegexp: /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$/,\n          equalsField: \"password-confirm\"\n        },\n        validationErrors: {\n          //minLength: '패스워드는 최소 4자 이상이어야 합니다.',\n          //matchRegexp: '패스워드는 문자와 숫자의 조합이어야합니다.' ,\n          equalsField: '패스워드 확인이 일치하지 않습니다.'\n        },\n        InputProps: {\n          endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n            position: \"end\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 43\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            className: \"text-20\",\n            color: \"action\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 74\n            }\n          }, \"vpn_key\"))\n        },\n        variant: \"outlined\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(TextFieldFormsy, {\n        className: \"mb-16\",\n        type: \"password\",\n        name: \"password-confirm\",\n        label: \"\\uBCC0\\uACBD \\uD328\\uC2A4\\uC6CC\\uB4DC \\uD655\\uC778\",\n        validations: \"equalsField:password\",\n        validationErrors: {\n          equalsField: '패스워드 확인이 일치하지 않습니다.'\n        },\n        InputProps: {\n          endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n            position: \"end\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 43\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            className: \"text-20\",\n            color: \"action\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 74\n            }\n          }, \"vpn_key\"))\n        },\n        variant: \"outlined\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"secondary\",\n        className: \"w-full mx-auto mt-16 normal-case\",\n        \"aria-label\": \"LOG IN\",\n        disabled: !canSubmit,\n        value: \"legacy\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }\n      }, \"\\uD328\\uC2A4\\uC6CC\\uB4DC\\uBCC0\\uACBD\")));\n    }\n  }]);\n\n  return LoginForm;\n}(Component);\n\nexport default withStyles(styles, {\n  withTheme: true\n})(LoginForm);","map":{"version":3,"sources":["C:/Projects/Trunks/OWP-GIT/owp-fe/src/main/content/login/LoginPWChangeForm.js"],"names":["TextFieldFormsy","Button","Icon","InputAdornment","withStyles","Formsy","React","Component","jwtService","OwpMessage","styles","theme","root","width","LoginForm","state","canSubmit","form","createRef","disableButton","setState","enableButton","onSubmit","model","session","UserSEQ","UserID","pw","password","pw_passed","SamePass_0","SamePass_1","SamePass_2","i","length","chr_pass_0","chr_pass_1","chr_pass_2","charCodeAt","message","variant","updatePw","then","res","console","log","resultCode","props","closeFunc","window","localStorage","getItem","JSON","parse","classes","readOnly","endAdornment","equalsField","withTheme"],"mappings":"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","sourcesContent":["import {TextFieldFormsy} from \"owp/@fuse\";\r\nimport {Button, Icon, InputAdornment, withStyles} from '@material-ui/core';\r\nimport Formsy from 'formsy-react';\r\nimport React, {Component} from 'react';\r\nimport jwtService from \"owp/jwtService\";\r\nimport {OwpMessage} from \"owp/wrapper\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n});\r\n\r\nclass LoginForm extends Component {\r\n    state = {\r\n        canSubmit: false,\r\n    };\r\n\r\n    form = React.createRef();\r\n\r\n    session;\r\n    componentDidMount() {\r\n        this.session = window.localStorage.getItem('session');\r\n        if(this.session){\r\n            this.session = JSON.parse(window.localStorage.getItem('session'));\r\n            console.log(this.session);\r\n\r\n            this.setState({UserID:this.session['UserID']});\r\n        }\r\n    }\r\n\r\n    disableButton = () => {\r\n        this.setState({ canSubmit: false });\r\n    };\r\n\r\n    enableButton = () => {\r\n        this.setState({ canSubmit: true });\r\n    };\r\n\r\n    onSubmit = model => {\r\n\r\n        model['UserSEQ'] = this.session.UserSEQ;\r\n        model['UserID'] = this.session.UserID;\r\n\r\n        const pw = model.password ;\r\n\r\n        let pw_passed = true;  // 추후 벨리데이션 처리시에 해당 인자값 확인을 위해\r\n        let SamePass_0 = 0; //동일문자 카운트\r\n        let SamePass_1 = 0; //연속성(+) 카운드\r\n        let SamePass_2 = 0; //연속성(-) 카운드\r\n\r\n        for(let i=0; i < pw.length; i++) {\r\n            let chr_pass_0;\r\n            let chr_pass_1;\r\n            let chr_pass_2;\r\n\r\n            if(i >= 2) {\r\n                chr_pass_0 = pw.charCodeAt(i-2);\r\n                chr_pass_1 = pw.charCodeAt(i-1);\r\n                chr_pass_2 = pw.charCodeAt(i);\r\n\r\n                //동일문자 카운트\r\n                if((chr_pass_0 === chr_pass_1) && (chr_pass_1 === chr_pass_2)) {\r\n                    SamePass_0++;\r\n                }\r\n                else {\r\n                    SamePass_0 = 0;\r\n                }\r\n\r\n                //연속성(+) 카운드\r\n                if(chr_pass_0 - chr_pass_1 === 1 && chr_pass_1 - chr_pass_2 === 1) {\r\n                    SamePass_1++;\r\n                }\r\n                else {\r\n                    SamePass_1 = 0;\r\n                }\r\n\r\n                //연속성(-) 카운드\r\n                if(chr_pass_0 - chr_pass_1 === -1 && chr_pass_1 - chr_pass_2 === -1) {\r\n                    SamePass_2++;\r\n                }\r\n                else {\r\n                    SamePass_2 = 0;\r\n                }\r\n            }\r\n\r\n            if(SamePass_0 > 0) {\r\n                this.disableButton();\r\n                pw_passed = false;\r\n                OwpMessage({\r\n                    message     : '동일문자를 3자 이상 연속 입력할 수 없습니다.',//text or html\r\n                    variant: 'error'//success error info warning null\r\n                });\r\n            }\r\n\r\n\r\n\r\n            if(SamePass_1 > 0 || SamePass_2 > 0 ) {\r\n                this.disableButton();\r\n                pw_passed = false;\r\n                OwpMessage({\r\n                    message     : '동일문자를 3자 이상 연속 입력할 수 없습니다.',//text or html\r\n                    variant: 'error'//success error info warning null\r\n                });\r\n            }\r\n\r\n            if(!pw_passed) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(pw_passed) {\r\n\r\n            jwtService.updatePw(model).then(res => {\r\n                console.log(\"ResultData...\", res);\r\n                if(res){\r\n                    if(res.resultCode === \"STATUS_1\"){\r\n                        // OwpMessage({\r\n                        //     message     : '정상 처리 되었습니다.',//text or html\r\n                        //     variant: 'success'//success error info warning null\r\n                        // });\r\n                    }\r\n                    this.props.closeFunc();\r\n                }\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const { canSubmit } = this.state;\r\n\r\n        return (\r\n            <div className={classes.root}>\r\n                <Formsy\r\n                    onValidSubmit={this.onSubmit}\r\n                    onValid={this.enableButton}\r\n                    onInvalid={this.disableButton}\r\n                    ref={form => (this.form = form)}\r\n                    className=\"flex flex-col justify-center w-full\"\r\n                >\r\n                    <TextFieldFormsy\r\n                        className=\"mb-16\"\r\n                        type=\"text\"\r\n                        name=\"email\"\r\n                        label=\"아이디\"\r\n                        value={this.state.UserID}\r\n                        InputProps={{\r\n                            readOnly: true,\r\n                            endAdornment: (\r\n                                <InputAdornment position=\"end\">\r\n                                    <Icon className=\"text-20\" color=\"action\">\r\n                                        email\r\n                                    </Icon>\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                        variant=\"outlined\"\r\n\r\n                        required\r\n                    />\r\n\r\n                    <TextFieldFormsy\r\n                        className=\"mb-16\"\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        label=\"변경 패스워드\"\r\n                        validations={{\r\n                            //minLength: 4,\r\n                            //matchRegexp: /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$/,\r\n                            equalsField:\"password-confirm\"\r\n                        }}\r\n                        validationErrors={{\r\n                            //minLength: '패스워드는 최소 4자 이상이어야 합니다.',\r\n                            //matchRegexp: '패스워드는 문자와 숫자의 조합이어야합니다.' ,\r\n                            equalsField: '패스워드 확인이 일치하지 않습니다.'\r\n                        }}\r\n                        InputProps={{\r\n                            endAdornment: <InputAdornment position=\"end\"><Icon className=\"text-20\" color=\"action\">vpn_key</Icon></InputAdornment>\r\n                        }}\r\n                        variant=\"outlined\"\r\n                        required\r\n                    />\r\n\r\n                    <TextFieldFormsy\r\n                        className=\"mb-16\"\r\n                        type=\"password\"\r\n                        name=\"password-confirm\"\r\n                        label=\"변경 패스워드 확인\"\r\n                        validations=\"equalsField:password\"\r\n                        validationErrors={{\r\n                            equalsField: '패스워드 확인이 일치하지 않습니다.'\r\n                        }}\r\n                        InputProps={{\r\n                            endAdornment: <InputAdornment position=\"end\"><Icon className=\"text-20\" color=\"action\">vpn_key</Icon></InputAdornment>\r\n                        }}\r\n                        variant=\"outlined\"\r\n                        required\r\n                    />\r\n\r\n                    <Button\r\n                        type=\"submit\"\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        className=\"w-full mx-auto mt-16 normal-case\"\r\n                        aria-label=\"LOG IN\"\r\n                        disabled={!canSubmit}\r\n                        value=\"legacy\"\r\n                    >\r\n                        패스워드변경\r\n                    </Button>\r\n                </Formsy>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(LoginForm);\r\n"]},"metadata":{},"sourceType":"module"}