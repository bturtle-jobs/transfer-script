{"ast":null,"code":"import _objectSpread from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\owp\\\\src\\\\wrapper\\\\OwpDateTimePickerMulti.js\";\nimport classNames from 'classnames';\nimport every from 'lodash/every';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport range from 'lodash/range';\nimport uniqueId from 'lodash/uniqueId';\nimport moment from 'moment';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { connect } from 'react-redux';\nimport OwpDateTimePicker from './OwpDateTimePicker';\nvar DATE_KEYS = ['start', 'end'];\nvar DATES_LABELS_TXT_KR = ['시작일', '종료일'];\nvar START_NUM = 0;\nvar END_NUM = 1;\n\nfunction OwpDateTimePickerMulti(_ref) {\n  var _this = this;\n\n  var id = _ref.id,\n      name = _ref.name,\n      className = _ref.className,\n      required = _ref.required,\n      fullDate = _ref.fullDate,\n      useHour = _ref.useHour,\n      useSecond = _ref.useSecond,\n      usePicker = _ref.usePicker,\n      useClear = _ref.useClear,\n      useReset = _ref.useReset,\n      useForceChange = _ref.useForceChange,\n      useValidate = _ref.useValidate,\n      useFilterSameDate = _ref.useFilterSameDate,\n      autoFocus = _ref.autoFocus,\n      disableLabels = _ref.disableLabels,\n      labels = _ref.labels,\n      defaultValues = _ref.defaultValues,\n      values = _ref.values,\n      errorMessages = _ref.errorMessages,\n      position = _ref.position,\n      initNow = _ref.initNow,\n      isReset = _ref.isReset,\n      isSearch = _ref.isSearch,\n      inputProps = _ref.inputProps,\n      InputProps = _ref.InputProps,\n      onChange = _ref.onChange;\n  var useFullDate = fullDate || useSecond;\n  var labelsData = DATES_LABELS_TXT_KR.map(function (label, index) {\n    return get(labels, DATE_KEYS[index], label);\n  });\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      errors = _useState2[0],\n      setErrors = _useState2[1];\n\n  var datesRef = range(2).map(function (_) {\n    return useRef(null);\n  });\n  var handleChangeDates = useCallback(function (isStart, key) {\n    var changedEvent = new Event('change', {\n      bubbles: true\n    });\n\n    if (every(datesRef.map(function (_ref2) {\n      var current = _ref2.current;\n      return !current;\n    }))) {\n      setErrors({});\n      Object.defineProperty(changedEvent, 'target', {\n        writable: false,\n        value: {\n          name: name,\n          value: ''\n        }\n      });\n      onChange(changedEvent, '');\n      return;\n    }\n\n    var _labels = {\n      [DATE_KEYS[START_NUM]]: labels.start || DATES_LABELS_TXT_KR[START_NUM],\n      [DATE_KEYS[END_NUM]]: labels.end || DATES_LABELS_TXT_KR[END_NUM]\n    };\n\n    if (useValidate && moment(datesRef[isStart ? START_NUM : END_NUM].current).isAfter(new Date())) {\n      setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n        [key]: get(errorMessages, \"today.\".concat(DATE_KEYS[isStart ? START_NUM : END_NUM]), \"\".concat(_labels[DATE_KEYS[isStart ? START_NUM : END_NUM]], \" \\uC774 \\uC624\\uB298\\uBCF4\\uB2E4 \\uD074 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"))\n      }));\n      return;\n    }\n\n    if (!useForceChange && !every(datesRef.map(function (_ref3) {\n      var current = _ref3.current;\n      return !!current;\n    }))) {\n      return;\n    }\n\n    if (useFilterSameDate && moment(datesRef[START_NUM].current).isSame(datesRef[END_NUM].current)) {\n      setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n        [key]: get(errorMessages, \"same.\".concat(DATE_KEYS[isStart ? START_NUM : END_NUM]), \"\".concat(_labels[DATE_KEYS[isStart ? START_NUM : END_NUM]], \" \\uC774 \").concat(_labels[DATE_KEYS[isStart ? END_NUM : START_NUM]], \" \\uACFC \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"))\n      }));\n      return;\n    }\n\n    if (moment(datesRef[START_NUM].current).isAfter(datesRef[END_NUM].current)) {\n      setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n        [key]: get(errorMessages, \"diff.\".concat(DATE_KEYS[isStart ? START_NUM : END_NUM]), isStart ? \"\".concat(_labels.start, \" \\uC740 \").concat(_labels.end, \" \\uBCF4\\uB2E4 \\uD074 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\") : \"\".concat(_labels.end, \" \\uC740 \").concat(_labels.start, \" \\uBCF4\\uB2E4 \\uCEE4\\uC57C \\uD569\\uB2C8\\uB2E4.\"))\n      }));\n      return;\n    }\n\n    setErrors({});\n    var changedDatesValue = datesRef.map(function (_ref4) {\n      var current = _ref4.current;\n      return current;\n    }).join(',');\n    Object.defineProperty(changedEvent, 'target', {\n      writable: false,\n      value: {\n        name: name,\n        value: changedDatesValue\n      }\n    });\n    onChange(changedEvent, changedDatesValue);\n  }, [useValidate, useForceChange, datesRef, onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('flex', className),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, DATE_KEYS.map(function (key, index) {\n    var isStart = index === 0;\n    var defaultValue = get(defaultValues, key);\n    return /*#__PURE__*/React.createElement(OwpDateTimePicker, {\n      key: \"\".concat(name, \"-item-\").concat(index),\n      initNow: initNow,\n      className: classNames({\n        'mr-12': isStart,\n        'mr-20': !isStart && isSearch\n      }, className),\n      position: position,\n      required: required,\n      autoFocus: autoFocus && isStart,\n      fullDate: useFullDate,\n      useValidate: useValidate,\n      useHour: useHour,\n      useSecond: useSecond,\n      usePicker: usePicker,\n      useClear: useClear,\n      useReset: useReset,\n      label: disableLabels ? null : get(labelsData, index),\n      defaultValue: isEmpty(defaultValue) ? get(inputProps, \"\".concat(key, \"[\\\"defaultValue\\\"]\"), '') : defaultValue,\n      value: get(values, key, get(inputProps, \"\".concat(key, \"[\\\"value\\\"]\"))),\n      errorMessage: get(errors, key),\n      inputProps: get(inputProps, key),\n      onChange: function onChange(_, date) {\n        if (useReset && isReset || datesRef[index].current !== date) {\n          datesRef[index].current = date;\n          handleChangeDates(isStart, key);\n        }\n      },\n      handleResetError: function handleResetError() {\n        return setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n          [key]: ''\n        }));\n      }\n      /*eslint-disable-next-line*/\n      ,\n      InputProps: get(InputProps, key),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }\n    });\n  }));\n}\n\nOwpDateTimePickerMulti.defaultProps = {\n  id: \"owp-date-time-picker-multi-\".concat(uniqueId()),\n  name: \"owp-date-time-picker-multi\",\n  className: '',\n  required: false,\n  fullDate: false,\n  autoFocus: false,\n  autoMove: false,\n  initNow: false,\n  isSearch: false,\n  useHour: false,\n  useForceChange: true,\n  useValidate: true,\n  useSecond: false,\n  usePicker: true,\n  useClear: true,\n  useReset: false,\n  useFilterSameDate: false,\n  position: 'absolute',\n  disableLabels: false,\n  defaultValues: {\n    start: '',\n    end: ''\n  },\n  values: {\n    start: '',\n    end: ''\n  },\n  labels: {\n    start: '시작일',\n    end: '종료일'\n  },\n  errorMessages: {\n    today: {\n      start: undefined,\n      end: undefined\n    },\n    same: {\n      start: undefined,\n      end: undefined\n    },\n    diff: {\n      start: undefined,\n      end: undefined\n    }\n  },\n  inputProps: {\n    start: {},\n    end: {}\n  },\n  InputProps: {\n    start: {},\n    end: {}\n  },\n  onChange: function onChange(event, value) {}\n};\n\nfunction mapStateToProps(_ref5) {\n  var owp = _ref5.owp;\n  return {\n    isReset: owp.wrapper.isReset\n  };\n}\n\nexport default connect(mapStateToProps)(OwpDateTimePickerMulti);","map":{"version":3,"sources":["C:/Projects/Trunks/OWP-GIT/owp-fe/node_modules/owp/src/wrapper/OwpDateTimePickerMulti.js"],"names":["classNames","every","get","isEmpty","range","uniqueId","moment","React","useCallback","useRef","useState","connect","OwpDateTimePicker","DATE_KEYS","DATES_LABELS_TXT_KR","START_NUM","END_NUM","OwpDateTimePickerMulti","id","name","className","required","fullDate","useHour","useSecond","usePicker","useClear","useReset","useForceChange","useValidate","useFilterSameDate","autoFocus","disableLabels","labels","defaultValues","values","errorMessages","position","initNow","isReset","isSearch","inputProps","InputProps","onChange","useFullDate","labelsData","map","label","index","errors","setErrors","datesRef","_","handleChangeDates","isStart","key","changedEvent","Event","bubbles","current","Object","defineProperty","writable","value","_labels","start","end","isAfter","Date","isSame","changedDatesValue","join","defaultValue","date","defaultProps","autoMove","today","undefined","same","diff","event","mapStateToProps","owp","wrapper"],"mappings":"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","sourcesContent":["import classNames from 'classnames';\r\nimport every from 'lodash/every';\r\nimport get from 'lodash/get';\r\nimport isEmpty from 'lodash/isEmpty';\r\nimport range from 'lodash/range';\r\nimport uniqueId from 'lodash/uniqueId';\r\nimport moment from 'moment';\r\nimport React, { useCallback, useRef, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport OwpDateTimePicker from './OwpDateTimePicker';\r\n\r\nconst DATE_KEYS = ['start', 'end'];\r\nconst DATES_LABELS_TXT_KR = ['시작일', '종료일'];\r\n\r\nconst START_NUM = 0;\r\nconst END_NUM = 1;\r\n\r\nfunction OwpDateTimePickerMulti({\r\n    id,\r\n    name,\r\n    className,\r\n    required,\r\n    fullDate,\r\n    useHour,\r\n    useSecond,\r\n    usePicker,\r\n    useClear,\r\n    useReset,\r\n    useForceChange,\r\n    useValidate,\r\n    useFilterSameDate,\r\n    autoFocus,\r\n    disableLabels,\r\n    labels,\r\n    defaultValues,\r\n    values,\r\n    errorMessages,\r\n    position,\r\n    initNow,\r\n    isReset,\r\n    isSearch,\r\n    inputProps,\r\n    InputProps,\r\n    onChange,\r\n}) {\r\n    const useFullDate = fullDate || useSecond;\r\n    const labelsData = DATES_LABELS_TXT_KR.map((label, index) =>\r\n        get(labels, DATE_KEYS[index], label)\r\n    );\r\n\r\n    const [errors, setErrors] = useState({});\r\n    const datesRef = range(2).map((_) => useRef(null));\r\n    const handleChangeDates = useCallback(\r\n        (isStart, key) => {\r\n            const changedEvent = new Event('change', {\r\n                bubbles: true,\r\n            });\r\n\r\n            if (every(datesRef.map(({ current }) => !current))) {\r\n                setErrors({});\r\n                Object.defineProperty(changedEvent, 'target', {\r\n                    writable: false,\r\n                    value: {\r\n                        name,\r\n                        value: '',\r\n                    },\r\n                });\r\n\r\n                onChange(changedEvent, '');\r\n                return;\r\n            }\r\n\r\n            const _labels = {\r\n                [DATE_KEYS[START_NUM]]: labels.start || DATES_LABELS_TXT_KR[START_NUM],\r\n                [DATE_KEYS[END_NUM]]: labels.end || DATES_LABELS_TXT_KR[END_NUM],\r\n            };\r\n\r\n            if (\r\n                useValidate &&\r\n                moment(datesRef[isStart ? START_NUM : END_NUM].current).isAfter(new Date())\r\n            ) {\r\n                setErrors({\r\n                    ...errors,\r\n                    [key]: get(\r\n                        errorMessages,\r\n                        `today.${DATE_KEYS[isStart ? START_NUM : END_NUM]}`,\r\n                        `${\r\n                            _labels[DATE_KEYS[isStart ? START_NUM : END_NUM]]\r\n                        } 이 오늘보다 클 수 없습니다.`\r\n                    ),\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (!useForceChange && !every(datesRef.map(({ current }) => !!current))) {\r\n                return;\r\n            }\r\n\r\n            if (\r\n                useFilterSameDate &&\r\n                moment(datesRef[START_NUM].current).isSame(datesRef[END_NUM].current)\r\n            ) {\r\n                setErrors({\r\n                    ...errors,\r\n                    [key]: get(\r\n                        errorMessages,\r\n                        `same.${DATE_KEYS[isStart ? START_NUM : END_NUM]}`,\r\n                        `${_labels[DATE_KEYS[isStart ? START_NUM : END_NUM]]} 이 ${\r\n                            _labels[DATE_KEYS[isStart ? END_NUM : START_NUM]]\r\n                        } 과 같습니다.`\r\n                    ),\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (moment(datesRef[START_NUM].current).isAfter(datesRef[END_NUM].current)) {\r\n                setErrors({\r\n                    ...errors,\r\n                    [key]: get(\r\n                        errorMessages,\r\n                        `diff.${DATE_KEYS[isStart ? START_NUM : END_NUM]}`,\r\n                        isStart\r\n                            ? `${_labels.start} 은 ${_labels.end} 보다 클 수 없습니다.`\r\n                            : `${_labels.end} 은 ${_labels.start} 보다 커야 합니다.`\r\n                    ),\r\n                });\r\n                return;\r\n            }\r\n\r\n            setErrors({});\r\n\r\n            const changedDatesValue = datesRef.map(({ current }) => current).join(',');\r\n\r\n            Object.defineProperty(changedEvent, 'target', {\r\n                writable: false,\r\n                value: {\r\n                    name,\r\n                    value: changedDatesValue,\r\n                },\r\n            });\r\n\r\n            onChange(changedEvent, changedDatesValue);\r\n        },\r\n        [useValidate, useForceChange, datesRef, onChange]\r\n    );\r\n\r\n    return (\r\n        <div className={classNames('flex', className)}>\r\n            {DATE_KEYS.map((key, index) => {\r\n                const isStart = index === 0;\r\n\r\n                const defaultValue = get(defaultValues, key);\r\n\r\n                return (\r\n                    <OwpDateTimePicker\r\n                        key={`${name}-item-${index}`}\r\n                        initNow={initNow}\r\n                        className={classNames(\r\n                            { 'mr-12': isStart, 'mr-20': !isStart && isSearch },\r\n                            className\r\n                        )}\r\n                        position={position}\r\n                        required={required}\r\n                        autoFocus={autoFocus && isStart}\r\n                        fullDate={useFullDate}\r\n                        useValidate={useValidate}\r\n                        useHour={useHour}\r\n                        useSecond={useSecond}\r\n                        usePicker={usePicker}\r\n                        useClear={useClear}\r\n                        useReset={useReset}\r\n                        label={disableLabels ? null : get(labelsData, index)}\r\n                        defaultValue={\r\n                            isEmpty(defaultValue)\r\n                                ? get(inputProps, `${key}[\"defaultValue\"]`, '')\r\n                                : defaultValue\r\n                        }\r\n                        value={get(values, key, get(inputProps, `${key}[\"value\"]`))}\r\n                        errorMessage={get(errors, key)}\r\n                        inputProps={get(inputProps, key)}\r\n                        onChange={(_, date) => {\r\n                            if ((useReset && isReset) || datesRef[index].current !== date) {\r\n                                datesRef[index].current = date;\r\n                                handleChangeDates(isStart, key);\r\n                            }\r\n                        }}\r\n                        handleResetError={() =>\r\n                            setErrors({\r\n                                ...errors,\r\n                                [key]: '',\r\n                            })\r\n                        }\r\n                        /*eslint-disable-next-line*/\r\n                        InputProps={get(InputProps, key)}\r\n                    />\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n\r\nOwpDateTimePickerMulti.defaultProps = {\r\n    id: `owp-date-time-picker-multi-${uniqueId()}`,\r\n    name: `owp-date-time-picker-multi`,\r\n    className: '',\r\n    required: false,\r\n    fullDate: false,\r\n    autoFocus: false,\r\n    autoMove: false,\r\n    initNow: false,\r\n    isSearch: false,\r\n    useHour: false,\r\n    useForceChange: true,\r\n    useValidate: true,\r\n    useSecond: false,\r\n    usePicker: true,\r\n    useClear: true,\r\n    useReset: false,\r\n    useFilterSameDate: false,\r\n    position: 'absolute',\r\n    disableLabels: false,\r\n    defaultValues: {\r\n        start: '',\r\n        end: '',\r\n    },\r\n    values: {\r\n        start: '',\r\n        end: '',\r\n    },\r\n    labels: {\r\n        start: '시작일',\r\n        end: '종료일',\r\n    },\r\n    errorMessages: {\r\n        today: {\r\n            start: undefined,\r\n            end: undefined,\r\n        },\r\n        same: {\r\n            start: undefined,\r\n            end: undefined,\r\n        },\r\n        diff: {\r\n            start: undefined,\r\n            end: undefined,\r\n        },\r\n    },\r\n    inputProps: {\r\n        start: {},\r\n        end: {},\r\n    },\r\n    InputProps: {\r\n        start: {},\r\n        end: {},\r\n    },\r\n    onChange: (event, value) => {},\r\n};\r\n\r\nfunction mapStateToProps({ owp }) {\r\n    return {\r\n        isReset: owp.wrapper.isReset,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OwpDateTimePickerMulti);\r\n"]},"metadata":{},"sourceType":"module"}