{"ast":null,"code":"import _classCallCheck from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _objectWithoutProperties from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\owp\\\\src\\\\wrapper\\\\OwpNavSearch.js\";\nimport { ClickAwayListener, Icon, IconButton, ListItemIcon, ListItemText, Tooltip, withStyles } from '@material-ui/core';\nimport MenuItem from '@material-ui/core/MenuItem/MenuItem';\nimport Paper from '@material-ui/core/Paper/Paper';\nimport Popper from '@material-ui/core/Popper/Popper';\nimport TextField from '@material-ui/core/TextField/TextField';\nimport match from 'autosuggest-highlight/match';\nimport parse from 'autosuggest-highlight/parse';\nimport classNames from 'classnames';\nimport deburr from 'lodash/deburr';\nimport { FuseUtils } from 'owp/@fuse';\nimport { addSearchHistory } from 'owp/store/actions/persistor';\nimport React, { Component } from 'react';\nimport Autosuggest from 'react-autosuggest';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nfunction renderInputComponent(inputProps) {\n  var classes = inputProps.classes,\n      _inputProps$inputRef = inputProps.inputRef,\n      inputRef = _inputProps$inputRef === void 0 ? function () {} : _inputProps$inputRef,\n      ref = inputProps.ref,\n      other = _objectWithoutProperties(inputProps, [\"classes\", \"inputRef\", \"ref\"]);\n\n  return /*#__PURE__*/React.createElement(TextField, Object.assign({\n    autoFocus: true //variant={'outlined'}\n    ,\n    fullWidth: true,\n    InputProps: {\n      disableUnderline: true,\n      inputRef: function inputRef(node) {//ref(node);\n        //inputRef(node);\n      },\n      classes: {\n        input: classNames(classes.input, 'py-0 px-16 h-32')\n      }\n    }\n  }, other, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }));\n}\n\nfunction renderSuggestion(suggestion, _ref) {\n  var _this = this;\n\n  var query = _ref.query,\n      isHighlighted = _ref.isHighlighted;\n  var matches = match(suggestion.title, query);\n  var parts = parse(suggestion.title, matches);\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    selected: isHighlighted,\n    component: \"div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, suggestion.icon ? /*#__PURE__*/React.createElement(Icon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, suggestion.icon) : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-14 w-24 font-bold uppercase text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, suggestion.title[0])), /*#__PURE__*/React.createElement(ListItemText, {\n    className: \"pl-0\",\n    primary: parts.map(function (part, index) {\n      return part.highlight ? /*#__PURE__*/React.createElement(\"span\", {\n        key: String(index),\n        style: {\n          fontWeight: 600\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }\n      }, part.text) : /*#__PURE__*/React.createElement(\"strong\", {\n        key: String(index),\n        style: {\n          fontWeight: 300\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }\n      }, part.text);\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }));\n}\n\nfunction getSuggestions(value, data, defaultSuggestions) {\n  var inputValue = deburr(value.trim()).toLowerCase();\n  var inputLength = inputValue.length;\n  var count = 0;\n  var results = inputLength === 0 ? defaultSuggestions : data.filter(function (suggestion) {\n    var keep = count < 15 && (match(suggestion.id, 'C' + inputValue).length > 0 || match(suggestion.title, inputValue).length > 0);\n\n    if (keep) {\n      count += 1;\n    }\n\n    return keep;\n  });\n  return results;\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.title;\n}\n\nvar propTypes = {};\nvar defaultProps = {\n  trigger: /*#__PURE__*/React.createElement(IconButton, {\n    className: \"w-64 h-64\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \"search\"))\n};\n\nvar styles = function styles(theme) {\n  return {\n    root: {},\n    container: {\n      position: 'relative'\n    },\n    suggestionsContainerOpen: {\n      position: 'absolute',\n      zIndex: 1,\n      marginTop: theme.spacing.unit,\n      left: 0,\n      right: 0\n    },\n    suggestion: {\n      display: 'block'\n    },\n    suggestionsList: {\n      margin: 0,\n      padding: 0,\n      listStyleType: 'none'\n    }\n  };\n};\n\nvar FuseSearch = /*#__PURE__*/function (_Component) {\n  _inherits(FuseSearch, _Component);\n\n  var _super = _createSuper(FuseSearch);\n\n  function FuseSearch() {\n    var _this2;\n\n    _classCallCheck(this, FuseSearch);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _super.call.apply(_super, [this].concat(args));\n    _this2.state = {\n      search: false,\n      flatNavigation: null,\n      popper: '',\n      suggestions: _this2.props.searchHistories\n    };\n\n    _this2.showSearch = function () {\n      _this2.setState({\n        search: true\n      });\n\n      document.addEventListener('keydown', _this2.escFunction, false);\n    };\n\n    _this2.hideSearch = function () {\n      _this2.setState({\n        search: false,\n        popper: ''\n      });\n\n      document.removeEventListener('keydown', _this2.escFunction, false);\n    };\n\n    _this2.escFunction = function (event) {\n      if (event.keyCode === 27) {\n        _this2.hideSearch();\n      }\n    };\n\n    _this2.handleSuggestionsFetchRequested = function (_ref2) {\n      var value = _ref2.value;\n\n      _this2.setState({\n        suggestions: getSuggestions(value, _this2.state.flatNavigation, _this2.props.searchHistories)\n      });\n    };\n\n    _this2.handleSuggestionSelected = function (event, _ref3) {\n      var suggestion = _ref3.suggestion;\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (!suggestion.url) {\n        return;\n      }\n\n      _this2.props.history.push(suggestion.url);\n\n      _this2.props.addSearchHistory(suggestion);\n\n      _this2.hideSearch();\n    };\n\n    _this2.handleSuggestionsClearRequested = function () {\n      _this2.setState({\n        suggestions: []\n      });\n    };\n\n    _this2.handleChange = function (name) {\n      return function (event, _ref4) {\n        var newValue = _ref4.newValue;\n\n        _this2.setState({\n          [name]: newValue\n        });\n      };\n    };\n\n    _this2.handleClickAway = function (event) {\n      return (!_this2.suggestionsNode || !_this2.suggestionsNode.contains(event.target)) && _this2.hideSearch();\n    };\n\n    _this2.handleRef = function (domNode) {\n      _this2.popperNode = domNode;\n    };\n\n    _this2.handleSuggestionsRef = function (domNode) {\n      _this2.suggestionsNode = domNode;\n    };\n\n    return _this2;\n  }\n\n  _createClass(FuseSearch, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.flattenNavigation(this.props.navigation);\n    }\n  }, {\n    key: \"flattenNavigation\",\n    value: function flattenNavigation(navigation) {\n      this.setState({\n        flatNavigation: FuseUtils.getFlatNavigation(navigation)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var classes = this.props.classes;\n      var autosuggestProps = {\n        renderInputComponent: renderInputComponent,\n        highlightFirstSuggestion: true,\n        suggestions: this.state.suggestions,\n        onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n        onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n        onSuggestionSelected: this.handleSuggestionSelected,\n        getSuggestionValue: getSuggestionValue,\n        renderSuggestion: renderSuggestion,\n        alwaysRenderSuggestions: false\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(classes.root, 'flex w-full'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }\n      }, !this.state.search && /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"\\uBA54\\uB274\\uB97C \\uAC80\\uC0C9\\uD569\\uB2C8\\uB2E4.\",\n        placement: \"bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        onClick: this.showSearch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 25\n        }\n      }, this.props.trigger)), this.state.search && /*#__PURE__*/React.createElement(ClickAwayListener, {\n        onClickAway: this.handleClickAway,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex items-center w-full\",\n        ref: this.handleRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Autosuggest, Object.assign({}, autosuggestProps, {\n        inputProps: {\n          classes: classes,\n          placeholder: '메뉴검색',\n          value: this.state.popper,\n          onChange: this.handleChange('popper'),\n          InputLabelProps: {\n            shrink: true\n          }\n        },\n        theme: {\n          container: 'flex flex-1 w-full',\n          suggestionsList: classes.suggestionsList,\n          suggestion: classes.suggestion\n        },\n        renderSuggestionsContainer: function renderSuggestionsContainer(options) {\n          return /*#__PURE__*/React.createElement(Popper, {\n            anchorEl: _this3.popperNode,\n            open: Boolean(options.children),\n            popperOptions: {\n              positionFixed: true\n            },\n            className: \"z-9999\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 37\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            ref: _this3.handleSuggestionsRef,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(Paper, Object.assign({\n            elevation: 1,\n            square: true\n          }, options.containerProps, {\n            style: {\n              width: 270\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 45\n            }\n          }), options.children)));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 29\n        }\n      })))));\n    }\n  }]);\n\n  return FuseSearch;\n}(Component);\n\nfunction mapStateToProps(_ref5) {\n  var fuse = _ref5.fuse,\n      persistor = _ref5.persistor;\n  return {\n    navigation: fuse.navigation,\n    searchHistories: persistor.search.searchHistories[0] ? [persistor.search.searchHistories[0]] : []\n  };\n}\n\nvar mapDispatchToProps = {\n  addSearchHistory: addSearchHistory\n};\nFuseSearch.propTypes = propTypes;\nFuseSearch.defaultProps = defaultProps;\nexport default withStyles(styles)(withRouter(connect(mapStateToProps, mapDispatchToProps)(FuseSearch)));","map":{"version":3,"sources":["C:/Projects/Trunks/OWP-GIT/owp-fe/node_modules/owp/src/wrapper/OwpNavSearch.js"],"names":["ClickAwayListener","Icon","IconButton","ListItemIcon","ListItemText","Tooltip","withStyles","MenuItem","Paper","Popper","TextField","match","parse","classNames","deburr","FuseUtils","addSearchHistory","React","Component","Autosuggest","connect","withRouter","renderInputComponent","inputProps","classes","inputRef","ref","other","disableUnderline","node","input","renderSuggestion","suggestion","query","isHighlighted","matches","title","parts","icon","map","part","index","highlight","String","fontWeight","text","getSuggestions","value","data","defaultSuggestions","inputValue","trim","toLowerCase","inputLength","length","count","results","filter","keep","id","getSuggestionValue","propTypes","defaultProps","trigger","styles","theme","root","container","position","suggestionsContainerOpen","zIndex","marginTop","spacing","unit","left","right","display","suggestionsList","margin","padding","listStyleType","FuseSearch","state","search","flatNavigation","popper","suggestions","props","searchHistories","showSearch","setState","document","addEventListener","escFunction","hideSearch","removeEventListener","event","keyCode","handleSuggestionsFetchRequested","handleSuggestionSelected","preventDefault","stopPropagation","url","history","push","handleSuggestionsClearRequested","handleChange","name","newValue","handleClickAway","suggestionsNode","contains","target","handleRef","domNode","popperNode","handleSuggestionsRef","flattenNavigation","navigation","getFlatNavigation","autosuggestProps","highlightFirstSuggestion","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","alwaysRenderSuggestions","placeholder","onChange","InputLabelProps","shrink","options","Boolean","children","positionFixed","containerProps","width","mapStateToProps","fuse","persistor","mapDispatchToProps"],"mappings":"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","sourcesContent":["import {\r\n    ClickAwayListener,\r\n    Icon,\r\n    IconButton,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    Tooltip,\r\n    withStyles,\r\n} from '@material-ui/core';\r\nimport MenuItem from '@material-ui/core/MenuItem/MenuItem';\r\nimport Paper from '@material-ui/core/Paper/Paper';\r\nimport Popper from '@material-ui/core/Popper/Popper';\r\nimport TextField from '@material-ui/core/TextField/TextField';\r\nimport match from 'autosuggest-highlight/match';\r\nimport parse from 'autosuggest-highlight/parse';\r\nimport classNames from 'classnames';\r\nimport deburr from 'lodash/deburr';\r\nimport { FuseUtils } from 'owp/@fuse';\r\nimport { addSearchHistory } from 'owp/store/actions/persistor';\r\nimport React, { Component } from 'react';\r\nimport Autosuggest from 'react-autosuggest';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nfunction renderInputComponent(inputProps) {\r\n    const { classes, inputRef = () => {}, ref, ...other } = inputProps;\r\n\r\n    return (\r\n        <TextField\r\n            autoFocus\r\n            //variant={'outlined'}\r\n            fullWidth\r\n            InputProps={{\r\n                disableUnderline: true,\r\n                inputRef: (node) => {\r\n                    //ref(node);\r\n                    //inputRef(node);\r\n                },\r\n                classes: {\r\n                    input: classNames(classes.input, 'py-0 px-16 h-32'),\r\n                },\r\n            }}\r\n            {...other}\r\n        />\r\n    );\r\n}\r\n\r\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\r\n    const matches = match(suggestion.title, query);\r\n    const parts = parse(suggestion.title, matches);\r\n\r\n    return (\r\n        <MenuItem selected={isHighlighted} component=\"div\">\r\n            <ListItemIcon>\r\n                {suggestion.icon ? (\r\n                    <Icon>{suggestion.icon}</Icon>\r\n                ) : (\r\n                    <span className=\"text-14 w-24 font-bold uppercase text-center\">\r\n                        {suggestion.title[0]}\r\n                    </span>\r\n                )}\r\n            </ListItemIcon>\r\n            <ListItemText\r\n                className=\"pl-0\"\r\n                primary={parts.map((part, index) => {\r\n                    return part.highlight ? (\r\n                        <span key={String(index)} style={{ fontWeight: 600 }}>\r\n                            {part.text}\r\n                        </span>\r\n                    ) : (\r\n                        <strong key={String(index)} style={{ fontWeight: 300 }}>\r\n                            {part.text}\r\n                        </strong>\r\n                    );\r\n                })}\r\n            />\r\n        </MenuItem>\r\n    );\r\n}\r\n\r\nfunction getSuggestions(value, data, defaultSuggestions) {\r\n    const inputValue = deburr(value.trim()).toLowerCase();\r\n    const inputLength = inputValue.length;\r\n    let count = 0;\r\n    const results =\r\n        inputLength === 0\r\n            ? defaultSuggestions\r\n            : data.filter((suggestion) => {\r\n                  const keep =\r\n                      count < 15 &&\r\n                      (match(suggestion.id, 'C' + inputValue).length > 0 ||\r\n                          match(suggestion.title, inputValue).length > 0);\r\n\r\n                  if (keep) {\r\n                      count += 1;\r\n                  }\r\n\r\n                  return keep;\r\n              });\r\n    return results;\r\n}\r\n\r\nfunction getSuggestionValue(suggestion) {\r\n    return suggestion.title;\r\n}\r\n\r\nconst propTypes = {};\r\n\r\nconst defaultProps = {\r\n    trigger: (\r\n        <IconButton className=\"w-64 h-64\">\r\n            <Icon>search</Icon>\r\n        </IconButton>\r\n    ),\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    root: {},\r\n    container: {\r\n        position: 'relative',\r\n    },\r\n    suggestionsContainerOpen: {\r\n        position: 'absolute',\r\n        zIndex: 1,\r\n        marginTop: theme.spacing.unit,\r\n        left: 0,\r\n        right: 0,\r\n    },\r\n    suggestion: {\r\n        display: 'block',\r\n    },\r\n    suggestionsList: {\r\n        margin: 0,\r\n        padding: 0,\r\n        listStyleType: 'none',\r\n    },\r\n});\r\n\r\nclass FuseSearch extends Component {\r\n    state = {\r\n        search: false,\r\n        flatNavigation: null,\r\n        popper: '',\r\n        suggestions: this.props.searchHistories,\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.flattenNavigation(this.props.navigation);\r\n    }\r\n\r\n    showSearch = () => {\r\n        this.setState({ search: true });\r\n        document.addEventListener('keydown', this.escFunction, false);\r\n    };\r\n\r\n    hideSearch = () => {\r\n        this.setState({\r\n            search: false,\r\n            popper: '',\r\n        });\r\n        document.removeEventListener('keydown', this.escFunction, false);\r\n    };\r\n\r\n    escFunction = (event) => {\r\n        if (event.keyCode === 27) {\r\n            this.hideSearch();\r\n        }\r\n    };\r\n\r\n    flattenNavigation(navigation) {\r\n        this.setState({ flatNavigation: FuseUtils.getFlatNavigation(navigation) });\r\n    }\r\n\r\n    handleSuggestionsFetchRequested = ({ value }) => {\r\n        this.setState({\r\n            suggestions: getSuggestions(\r\n                value,\r\n                this.state.flatNavigation,\r\n                this.props.searchHistories\r\n            ),\r\n        });\r\n    };\r\n\r\n    handleSuggestionSelected = (event, { suggestion }) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        if (!suggestion.url) {\r\n            return;\r\n        }\r\n        this.props.history.push(suggestion.url);\r\n        this.props.addSearchHistory(suggestion);\r\n        this.hideSearch();\r\n    };\r\n\r\n    handleSuggestionsClearRequested = () => {\r\n        this.setState({\r\n            suggestions: [],\r\n        });\r\n    };\r\n\r\n    handleChange = (name) => (event, { newValue }) => {\r\n        this.setState({\r\n            [name]: newValue,\r\n        });\r\n    };\r\n\r\n    handleClickAway = (event) => {\r\n        return (\r\n            (!this.suggestionsNode || !this.suggestionsNode.contains(event.target)) &&\r\n            this.hideSearch()\r\n        );\r\n    };\r\n\r\n    handleRef = (domNode) => {\r\n        this.popperNode = domNode;\r\n    };\r\n\r\n    handleSuggestionsRef = (domNode) => {\r\n        this.suggestionsNode = domNode;\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const autosuggestProps = {\r\n            renderInputComponent,\r\n            highlightFirstSuggestion: true,\r\n            suggestions: this.state.suggestions,\r\n            onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\r\n            onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\r\n            onSuggestionSelected: this.handleSuggestionSelected,\r\n            getSuggestionValue,\r\n            renderSuggestion,\r\n            alwaysRenderSuggestions: false,\r\n        };\r\n\r\n        return (\r\n            <div className={classNames(classes.root, 'flex w-full')}>\r\n                {!this.state.search && (\r\n                    <Tooltip title=\"메뉴를 검색합니다.\" placement=\"bottom\">\r\n                        <div onClick={this.showSearch}>{this.props.trigger}</div>\r\n                    </Tooltip>\r\n                )}\r\n\r\n                {this.state.search && (\r\n                    <ClickAwayListener onClickAway={this.handleClickAway}>\r\n                        <div className=\"flex items-center w-full\" ref={this.handleRef}>\r\n                            <Autosuggest\r\n                                {...autosuggestProps}\r\n                                inputProps={{\r\n                                    classes,\r\n                                    placeholder: '메뉴검색',\r\n                                    value: this.state.popper,\r\n                                    onChange: this.handleChange('popper'),\r\n                                    InputLabelProps: {\r\n                                        shrink: true,\r\n                                    },\r\n                                }}\r\n                                theme={{\r\n                                    container: 'flex flex-1 w-full',\r\n                                    suggestionsList: classes.suggestionsList,\r\n                                    suggestion: classes.suggestion,\r\n                                }}\r\n                                renderSuggestionsContainer={(options) => (\r\n                                    <Popper\r\n                                        anchorEl={this.popperNode}\r\n                                        open={Boolean(options.children)}\r\n                                        popperOptions={{ positionFixed: true }}\r\n                                        className=\"z-9999\"\r\n                                    >\r\n                                        <div ref={this.handleSuggestionsRef}>\r\n                                            <Paper\r\n                                                elevation={1}\r\n                                                square\r\n                                                {...options.containerProps}\r\n                                                style={{ width: 270 }}\r\n                                            >\r\n                                                {options.children}\r\n                                            </Paper>\r\n                                        </div>\r\n                                    </Popper>\r\n                                )}\r\n                            />\r\n                        </div>\r\n                    </ClickAwayListener>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps({ fuse, persistor }) {\r\n    return {\r\n        navigation: fuse.navigation,\r\n        searchHistories: persistor.search.searchHistories[0]\r\n            ? [persistor.search.searchHistories[0]]\r\n            : [],\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addSearchHistory,\r\n};\r\n\r\nFuseSearch.propTypes = propTypes;\r\nFuseSearch.defaultProps = defaultProps;\r\n\r\nexport default withStyles(styles)(\r\n    withRouter(connect(mapStateToProps, mapDispatchToProps)(FuseSearch))\r\n);\r\n"]},"metadata":{},"sourceType":"module"}