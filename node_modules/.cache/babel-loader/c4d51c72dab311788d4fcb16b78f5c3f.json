{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _toConsumableArray from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\src\\\\main\\\\custom-component\\\\ImageUpload.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { OwpDialog, OwpButton } from 'owp/wrapper';\n\nvar ImageUpload = function ImageUpload(_ref) {\n  var classes = _ref.classes,\n      onUploadSuccess = _ref.onUploadSuccess,\n      imageValue = _ref.imageValue,\n      onDeleteImage = _ref.onDeleteImage,\n      isImage = _ref.isImage;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isUploading = _useState2[0],\n      setUploading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(imageValue ? imageValue : []),\n      _useState6 = _slicedToArray(_useState5, 2),\n      images = _useState6[0],\n      setImages = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      open = _useState8[0],\n      setOpen = _useState8[1];\n\n  var inputFileRef = React.useRef();\n\n  var fileUploadAction = function fileUploadAction() {\n    inputFileRef.current.click();\n  }; //TODO: using another syntax\n\n\n  useEffect(function () {\n    setImages(imageValue);\n  }, [imageValue]);\n\n  var handleOnChange = function handleOnChange(event) {\n    var files = event.target.files[0];\n\n    if (files) {\n      uploadFile(files);\n    }\n  };\n\n  var zoomImage = function zoomImage() {\n    setOpen(true);\n  };\n\n  var closeImage = function closeImage() {\n    setOpen(false);\n  }; //TODO:read image here\n\n\n  var renderImages = function renderImages(image) {\n    var imgUrl = isImage ? \"\".concat(process.env.REACT_APP_IMG_API_URL, \"/\").concat(image.fileSeq) : '/assets/images/icons/file.svg';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inline\",\n      key: image.fileSeq,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        padding: '3px',\n        objectFit: 'cover'\n      },\n      width: \"45\",\n      height: \"45\",\n      src: imgUrl,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }));\n  };\n\n  var deleteImage = function deleteImage(image, index) {\n    if (onDeleteImage) {\n      onDeleteImage(image);\n    }\n  };\n\n  var renderZoomImage = function renderZoomImage(image, index) {\n    var imgUrl = isImage ? \"\".concat(process.env.REACT_APP_IMG_API_URL, \"/\").concat(image.fileSeq) : '/assets/images/icons/file.svg';\n    var downLoadFileUrl = \"\".concat(process.env.REACT_APP_REST_API_URL, \"/downloadNFile/\").concat(image.fileSeq);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      key: image.fileSeq,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '0',\n        right: '0'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(OwpButton, {\n      style: {\n        right: '150px',\n        position: 'absolute'\n      },\n      color: \"secondary\",\n      variant: \"contained\",\n      onClick: function onClick() {\n        return deleteImage(image, index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, \"\\uC0AD\\uC81C\")), isImage ? /*#__PURE__*/React.createElement(\"a\", {\n      href: imgUrl,\n      target: \"_blank\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        padding: '3px',\n        objectFit: 'cover',\n        borderRadius: '10px'\n      },\n      width: \"230\",\n      height: \"230\",\n      src: imgUrl,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    })) : /*#__PURE__*/React.createElement(\"a\", {\n      href: downLoadFileUrl,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        padding: '3px',\n        objectFit: 'cover',\n        borderRadius: '10px'\n      },\n      width: \"230\",\n      height: \"230\",\n      src: imgUrl,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    }))));\n  };\n\n  var uploadFile = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n      var formData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              formData = new FormData();\n              formData.append('file', file);\n              _context.prev = 2;\n              _context.next = 5;\n              return axios({\n                method: 'post',\n                url: '/uploadFileRestService',\n                config: {\n                  headers: {\n                    'Content-Type': 'multipart/form-data'\n                  }\n                },\n                data: formData\n              }).then(function (res) {\n                if (res.data.resultData[0]) {\n                  var imageInfo = {\n                    fileName: res.data.resultData[0].FileName,\n                    fileSeq: res.data.resultData[0]['IPX_FILE.FILESEQ']\n                  };\n                  setImages(function (images) {\n                    return [].concat(_toConsumableArray(images), [imageInfo]);\n                  });\n\n                  if (onUploadSuccess) {\n                    onUploadSuccess(imageInfo);\n                  }\n                }\n              }).catch(function (error) {\n                return console.error(error);\n              });\n\n            case 5:\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 7]]);\n    }));\n\n    return function uploadFile(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inline\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inline\",\n    onClick: zoomImage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, (images === null || images === void 0 ? void 0 : images.length) > 0 && images.map(function (item, i) {\n    if (i < 2) {\n      return renderImages(item);\n    }\n  }), (images === null || images === void 0 ? void 0 : images.length) > 2 && /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 48\n    }\n  }, \"...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inline\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputFileRef,\n    id: \"file\",\n    type: \"file\",\n    style: {\n      display: 'none'\n    },\n    onChange: handleOnChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(OwpButton, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: fileUploadAction,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }, \"\\uC5C5\\uB85C\\uB4DC\"))), /*#__PURE__*/React.createElement(OwpDialog, {\n    onOpen: open,\n    width: \"500px\",\n    height: \"500px\",\n    dialogActions: /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(OwpButton, {\n      color: \"secondary\",\n      variant: \"outlined\",\n      onClick: closeImage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 33\n      }\n    }, \"\\uCDE8\\uC18C\"))),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      maxHeight: '490px',\n      overflowX: 'hidden',\n      overflowY: 'auto'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: fileUploadAction,\n    style: {\n      backgroundColor: '#f5f5f5',\n      width: '230px',\n      height: '230px',\n      borderRadius: '10px',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      cursor: 'pointer'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: '#595959',\n      fontSize: '24px',\n      fontWeight: 'bold',\n      display: 'inline-block'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 37\n    }\n  }, \"\\uC5C5\\uB85C\\uB4DC\"))), (images === null || images === void 0 ? void 0 : images.length) > 0 && images.map(function (item, i) {\n    return renderZoomImage(item, i);\n  }))))));\n};\n\nexport default ImageUpload;","map":{"version":3,"sources":["C:/Projects/Trunks/OWP-GIT/owp-fe/src/main/custom-component/ImageUpload.js"],"names":["React","useState","useEffect","axios","OwpDialog","OwpButton","ImageUpload","classes","onUploadSuccess","imageValue","onDeleteImage","isImage","isUploading","setUploading","error","setError","images","setImages","open","setOpen","inputFileRef","useRef","fileUploadAction","current","click","handleOnChange","event","files","target","uploadFile","zoomImage","closeImage","renderImages","image","imgUrl","process","env","REACT_APP_IMG_API_URL","fileSeq","padding","objectFit","deleteImage","index","renderZoomImage","downLoadFileUrl","REACT_APP_REST_API_URL","position","top","right","borderRadius","file","formData","FormData","append","method","url","config","headers","data","then","res","resultData","imageInfo","fileName","FileName","catch","console","length","map","item","i","display","maxHeight","overflowX","overflowY","backgroundColor","width","height","justifyContent","alignItems","cursor","color","fontSize","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { OwpDialog, OwpButton } from 'owp/wrapper';\r\n\r\nconst ImageUpload = ({ classes, onUploadSuccess, imageValue, onDeleteImage, isImage }) => {\r\n    const [isUploading, setUploading] = useState(false);\r\n    const [error, setError] = useState(false);\r\n    const [images, setImages] = useState(imageValue ? imageValue : []);\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const inputFileRef = React.useRef();\r\n\r\n    const fileUploadAction = () => {\r\n        inputFileRef.current.click();\r\n    };\r\n\r\n    //TODO: using another syntax\r\n    useEffect(() => {\r\n        setImages(imageValue);\r\n    }, [imageValue]);\r\n    const handleOnChange = (event) => {\r\n        let files = event.target.files[0];\r\n        if (files) {\r\n            uploadFile(files);\r\n        }\r\n    };\r\n\r\n    const zoomImage = () => {\r\n        setOpen(true);\r\n    };\r\n    const closeImage = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    //TODO:read image here\r\n    const renderImages = (image) => {\r\n        const imgUrl = isImage\r\n            ? `${process.env.REACT_APP_IMG_API_URL}/${image.fileSeq}`\r\n            : '/assets/images/icons/file.svg';\r\n        return (\r\n            <div className=\"inline\" key={image.fileSeq}>\r\n                <img\r\n                    style={{ padding: '3px', objectFit: 'cover' }}\r\n                    width=\"45\"\r\n                    height=\"45\"\r\n                    src={imgUrl}\r\n                ></img>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const deleteImage = (image, index) => {\r\n        if (onDeleteImage) {\r\n            onDeleteImage(image);\r\n        }\r\n    };\r\n\r\n    const renderZoomImage = (image, index) => {\r\n        const imgUrl = isImage\r\n            ? `${process.env.REACT_APP_IMG_API_URL}/${image.fileSeq}`\r\n            : '/assets/images/icons/file.svg';\r\n        const downLoadFileUrl = `${process.env.REACT_APP_REST_API_URL}/downloadNFile/${image.fileSeq}`;\r\n        return (\r\n            <div className=\"col-lg-6\" key={image.fileSeq}>\r\n                <div>\r\n                    <div\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: '0',\r\n                            right: '0',\r\n                        }}\r\n                    >\r\n                        <OwpButton\r\n                            style={{ right: '150px', position: 'absolute' }}\r\n                            color=\"secondary\"\r\n                            variant=\"contained\"\r\n                            onClick={() => deleteImage(image, index)}\r\n                        >\r\n                            삭제\r\n                        </OwpButton>\r\n                    </div>\r\n                    {isImage ? (\r\n                        <a href={imgUrl} target=\"_blank\">\r\n                            <img\r\n                                style={{ padding: '3px', objectFit: 'cover', borderRadius: '10px' }}\r\n                                width=\"230\"\r\n                                height=\"230\"\r\n                                src={imgUrl}\r\n                            ></img>\r\n                        </a>\r\n                    ) : (\r\n                        <a href={downLoadFileUrl}>\r\n                            <img\r\n                                style={{ padding: '3px', objectFit: 'cover', borderRadius: '10px' }}\r\n                                width=\"230\"\r\n                                height=\"230\"\r\n                                src={imgUrl}\r\n                            ></img>\r\n                        </a>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const uploadFile = async (file) => {\r\n        let formData = new FormData();\r\n        formData.append('file', file);\r\n        try {\r\n            await axios({\r\n                method: 'post',\r\n                url: '/uploadFileRestService',\r\n                config: {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data',\r\n                    },\r\n                },\r\n                data: formData,\r\n            })\r\n                .then((res) => {\r\n                    if (res.data.resultData[0]) {\r\n                        let imageInfo = {\r\n                            fileName: res.data.resultData[0].FileName,\r\n                            fileSeq: res.data.resultData[0]['IPX_FILE.FILESEQ'],\r\n                        };\r\n                        setImages((images) => {\r\n                            return [...images, imageInfo];\r\n                        });\r\n\r\n                        if (onUploadSuccess) {\r\n                            onUploadSuccess(imageInfo);\r\n                        }\r\n                    }\r\n                })\r\n                .catch((error) => console.error(error));\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <React.Fragment>\r\n                <div className=\"inline\">\r\n                    <div className=\"inline\" onClick={zoomImage}>\r\n                        {images?.length > 0 &&\r\n                            images.map((item, i) => {\r\n                                if (i < 2) {\r\n                                    return renderImages(item);\r\n                                }\r\n                            })}\r\n                        {images?.length > 2 && <span>...</span>}\r\n                    </div>\r\n\r\n                    {/* change this syntax */}\r\n                    <div className=\"inline\">\r\n                        <input\r\n                            ref={inputFileRef}\r\n                            id=\"file\"\r\n                            type=\"file\"\r\n                            style={{ display: 'none' }}\r\n                            onChange={handleOnChange}\r\n                        />\r\n                        <OwpButton color=\"secondary\" variant=\"contained\" onClick={fileUploadAction}>\r\n                            업로드\r\n                        </OwpButton>\r\n                    </div>\r\n                </div>\r\n                <OwpDialog\r\n                    onOpen={open}\r\n                    width=\"500px\"\r\n                    height=\"500px\"\r\n                    dialogActions={\r\n                        <React.Fragment>\r\n                            <div className=\"w-full center\">\r\n                                <OwpButton\r\n                                    color=\"secondary\"\r\n                                    variant=\"outlined\"\r\n                                    onClick={closeImage}\r\n                                >\r\n                                    취소\r\n                                </OwpButton>\r\n                            </div>\r\n                        </React.Fragment>\r\n                    }\r\n                >\r\n                    <React.Fragment>\r\n                        <div\r\n                            className=\"row\"\r\n                            style={{\r\n                                maxHeight: '490px',\r\n                                overflowX: 'hidden',\r\n                                overflowY: 'auto',\r\n                            }}\r\n                        >\r\n                            <div className=\"col-lg-6\">\r\n                                <div\r\n                                    onClick={fileUploadAction}\r\n                                    style={{\r\n                                        backgroundColor: '#f5f5f5',\r\n                                        width: '230px',\r\n                                        height: '230px',\r\n                                        borderRadius: '10px',\r\n                                        display: 'flex',\r\n                                        justifyContent: 'center',\r\n                                        alignItems: 'center',\r\n                                        cursor: 'pointer',\r\n                                    }}\r\n                                >\r\n                                    <span\r\n                                        style={{\r\n                                            color: '#595959',\r\n                                            fontSize: '24px',\r\n                                            fontWeight: 'bold',\r\n                                            display: 'inline-block',\r\n                                        }}\r\n                                    >\r\n                                        업로드\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            {images?.length > 0 &&\r\n                                images.map((item, i) => {\r\n                                    return renderZoomImage(item, i);\r\n                                })}\r\n                        </div>\r\n                    </React.Fragment>\r\n                </OwpDialog>\r\n            </React.Fragment>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ImageUpload;\r\n"]},"metadata":{},"sourceType":"module"}