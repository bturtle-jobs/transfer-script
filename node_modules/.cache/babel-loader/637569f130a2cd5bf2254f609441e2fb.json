{"ast":null,"code":"import _objectSpread from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\owp\\\\src\\\\wrapper\\\\OwpDateTimePickerMulti.js\";\nimport classNames from 'classnames';\nimport every from 'lodash/every';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport range from 'lodash/range';\nimport uniqueId from 'lodash/uniqueId';\nimport moment from 'moment';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { connect } from 'react-redux';\nimport OwpDateTimePicker from './OwpDateTimePicker';\nvar DATE_KEYS = ['start', 'end'];\nvar DATES_LABELS_TXT_KR = ['시작월', '종료월'];\nvar START_NUM = 0;\nvar END_NUM = 1;\n\nfunction OwpDateTimePickerMulti(_ref) {\n  var _this = this;\n\n  var id = _ref.id,\n      name = _ref.name,\n      className = _ref.className,\n      required = _ref.required,\n      fullDate = _ref.fullDate,\n      useHour = _ref.useHour,\n      useSecond = _ref.useSecond,\n      usePicker = _ref.usePicker,\n      useClear = _ref.useClear,\n      useReset = _ref.useReset,\n      useForceChange = _ref.useForceChange,\n      useValidate = _ref.useValidate,\n      useFilterSameDate = _ref.useFilterSameDate,\n      autoFocus = _ref.autoFocus,\n      labels = _ref.labels,\n      defaultValues = _ref.defaultValues,\n      values = _ref.values,\n      initNow = _ref.initNow,\n      isReset = _ref.isReset,\n      isSearch = _ref.isSearch,\n      inputProps = _ref.inputProps,\n      InputProps = _ref.InputProps,\n      onChange = _ref.onChange;\n  var useFullDate = fullDate || useSecond;\n  var labelsData = DATES_LABELS_TXT_KR.map(function (label, index) {\n    return get(labels, DATE_KEYS[index], label);\n  });\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      errors = _useState2[0],\n      setErrors = _useState2[1];\n\n  var datesRef = range(2).map(function (_) {\n    return useRef(null);\n  });\n  var handleChangeDates = useCallback(function (isStart, key) {\n    var changedEvent = new Event('change', {\n      bubbles: true\n    });\n\n    if (every(datesRef.map(function (_ref2) {\n      var current = _ref2.current;\n      return !current;\n    }))) {\n      setErrors({});\n      Object.defineProperty(changedEvent, 'target', {\n        writable: false,\n        value: {\n          name: name,\n          value: ''\n        }\n      });\n      onChange(changedEvent, '');\n      return;\n    }\n\n    if (useValidate && moment(datesRef[isStart ? START_NUM : END_NUM].current).isAfter(new Date())) {\n      setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n        [key]: \"\".concat(labels[DATE_KEYS[isStart ? START_NUM : END_NUM]], \" \\uC774 \\uC624\\uB298\\uBCF4\\uB2E4 \\uD074 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\")\n      }));\n      return;\n    }\n\n    if (!useForceChange && !every(datesRef.map(function (_ref3) {\n      var current = _ref3.current;\n      return !!current;\n    }))) {\n      return;\n    }\n\n    if (useFilterSameDate && moment(datesRef[START_NUM].current).isSame(datesRef[END_NUM].current)) {\n      setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n        [key]: \"\".concat(labels[DATE_KEYS[isStart ? START_NUM : END_NUM]], \" \\uC774 \").concat(labels[DATE_KEYS[isStart ? END_NUM : START_NUM]], \" \\uACFC \\uAC19\\uC2B5\\uB2C8\\uB2E4.\")\n      }));\n      return;\n    }\n\n    if (moment(datesRef[START_NUM].current).isAfter(datesRef[END_NUM].current)) {\n      setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n        [key]: isStart ? \"\".concat(labels.start, \" \\uC740 \").concat(labels.end, \" \\uBCF4\\uB2E4 \\uD074 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\") : \"\".concat(labels.end, \" \\uC740 \").concat(labels.start, \" \\uBCF4\\uB2E4 \\uCEE4\\uC57C \\uD569\\uB2C8\\uB2E4.\")\n      }));\n      return;\n    }\n\n    setErrors({});\n    var changedDatesValue = datesRef.map(function (_ref4) {\n      var current = _ref4.current;\n      return current;\n    }).join(',');\n    Object.defineProperty(changedEvent, 'target', {\n      writable: false,\n      value: {\n        name: name,\n        value: changedDatesValue\n      }\n    });\n    onChange(changedEvent, changedDatesValue);\n  }, [useValidate, useForceChange, datesRef, onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('flex', className),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, DATE_KEYS.map(function (key, index) {\n    var isStart = index === 0;\n    var defaultValue = get(defaultValues, key);\n    return /*#__PURE__*/React.createElement(OwpDateTimePicker, {\n      key: \"\".concat(name, \"-item-\").concat(index),\n      initNow: initNow,\n      className: classNames({\n        'mr-12': isStart,\n        'mr-20': !isStart && isSearch\n      }, className),\n      required: required,\n      autoFocus: autoFocus && isStart,\n      fullDate: useFullDate,\n      useValidate: useValidate,\n      useHour: useHour,\n      useSecond: useSecond,\n      usePicker: usePicker,\n      useClear: useClear,\n      useReset: useReset,\n      label: get(labelsData, index),\n      defaultValue: isEmpty(defaultValue) ? get(inputProps, \"\".concat(key, \"[\\\"defaultValue\\\"]\"), '') : defaultValue,\n      value: get(values, key, get(inputProps, \"\".concat(key, \"[\\\"value\\\"]\"))),\n      errorMessage: get(errors, key),\n      inputProps: get(inputProps, key),\n      onChange: function onChange(_, date) {\n        if (useReset && isReset || datesRef[index].current !== date) {\n          datesRef[index].current = date;\n          handleChangeDates(isStart, key);\n        }\n      },\n      handleResetError: function handleResetError() {\n        return setErrors(_objectSpread(_objectSpread({}, errors), {}, {\n          [key]: ''\n        }));\n      }\n      /*eslint-disable-next-line*/\n      ,\n      InputProps: get(InputProps, key),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    });\n  }));\n}\n\nOwpDateTimePickerMulti.defaultProps = {\n  id: \"owp-date-time-picker-multi-\".concat(uniqueId()),\n  name: \"owp-date-time-picker-multi\",\n  className: '',\n  required: false,\n  fullDate: false,\n  autoFocus: false,\n  autoMove: false,\n  initNow: false,\n  isSearch: false,\n  useHour: false,\n  useForceChange: true,\n  useValidate: true,\n  useSecond: false,\n  usePicker: true,\n  useClear: true,\n  useReset: false,\n  useFilterSameDate: false,\n  defaultValues: {\n    start: '',\n    end: ''\n  },\n  values: {\n    start: '',\n    end: ''\n  },\n  labels: {\n    start: '시작일',\n    end: '종료일'\n  },\n  inputProps: {\n    start: {},\n    end: {}\n  },\n  InputProps: {\n    start: {},\n    end: {}\n  },\n  onChange: function onChange(event, value) {}\n};\n\nfunction mapStateToProps(_ref5) {\n  var owp = _ref5.owp;\n  return {\n    isReset: owp.wrapper.isReset\n  };\n}\n\nexport default connect(mapStateToProps)(OwpDateTimePickerMulti);","map":{"version":3,"sources":["C:/Projects/Trunks/OWP-GIT/owp-fe/node_modules/owp/src/wrapper/OwpDateTimePickerMulti.js"],"names":["classNames","every","get","isEmpty","range","uniqueId","moment","React","useCallback","useRef","useState","connect","OwpDateTimePicker","DATE_KEYS","DATES_LABELS_TXT_KR","START_NUM","END_NUM","OwpDateTimePickerMulti","id","name","className","required","fullDate","useHour","useSecond","usePicker","useClear","useReset","useForceChange","useValidate","useFilterSameDate","autoFocus","labels","defaultValues","values","initNow","isReset","isSearch","inputProps","InputProps","onChange","useFullDate","labelsData","map","label","index","errors","setErrors","datesRef","_","handleChangeDates","isStart","key","changedEvent","Event","bubbles","current","Object","defineProperty","writable","value","isAfter","Date","isSame","start","end","changedDatesValue","join","defaultValue","date","defaultProps","autoMove","event","mapStateToProps","owp","wrapper"],"mappings":";;;AAAA,OAAOA,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,GAAP,MAAgB,YAAhB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,IAAgBC,WAAhB,EAA6BC,MAA7B,EAAqCC,QAArC,QAAqD,OAArD;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AAEA,IAAMC,SAAS,GAAG,CAAC,OAAD,EAAU,KAAV,CAAlB;AACA,IAAMC,mBAAmB,GAAG,CAAC,KAAD,EAAQ,KAAR,CAA5B;AAEA,IAAMC,SAAS,GAAG,CAAlB;AACA,IAAMC,OAAO,GAAG,CAAhB;;AAEA,SAASC,sBAAT,OAwBG;AAAA;;AAAA,MAvBCC,EAuBD,QAvBCA,EAuBD;AAAA,MAtBCC,IAsBD,QAtBCA,IAsBD;AAAA,MArBCC,SAqBD,QArBCA,SAqBD;AAAA,MApBCC,QAoBD,QApBCA,QAoBD;AAAA,MAnBCC,QAmBD,QAnBCA,QAmBD;AAAA,MAlBCC,OAkBD,QAlBCA,OAkBD;AAAA,MAjBCC,SAiBD,QAjBCA,SAiBD;AAAA,MAhBCC,SAgBD,QAhBCA,SAgBD;AAAA,MAfCC,QAeD,QAfCA,QAeD;AAAA,MAdCC,QAcD,QAdCA,QAcD;AAAA,MAbCC,cAaD,QAbCA,cAaD;AAAA,MAZCC,WAYD,QAZCA,WAYD;AAAA,MAXCC,iBAWD,QAXCA,iBAWD;AAAA,MAVCC,SAUD,QAVCA,SAUD;AAAA,MATCC,MASD,QATCA,MASD;AAAA,MARCC,aAQD,QARCA,aAQD;AAAA,MAPCC,MAOD,QAPCA,MAOD;AAAA,MANCC,OAMD,QANCA,OAMD;AAAA,MALCC,OAKD,QALCA,OAKD;AAAA,MAJCC,QAID,QAJCA,QAID;AAAA,MAHCC,UAGD,QAHCA,UAGD;AAAA,MAFCC,UAED,QAFCA,UAED;AAAA,MADCC,QACD,QADCA,QACD;AACC,MAAMC,WAAW,GAAGnB,QAAQ,IAAIE,SAAhC;AACA,MAAMkB,UAAU,GAAG5B,mBAAmB,CAAC6B,GAApB,CAAwB,UAACC,KAAD,EAAQC,KAAR;AAAA,WACvC3C,GAAG,CAAC8B,MAAD,EAASnB,SAAS,CAACgC,KAAD,CAAlB,EAA2BD,KAA3B,CADoC;AAAA,GAAxB,CAAnB;;AAFD,kBAM6BlC,QAAQ,CAAC,EAAD,CANrC;AAAA;AAAA,MAMQoC,MANR;AAAA,MAMgBC,SANhB;;AAOC,MAAMC,QAAQ,GAAG5C,KAAK,CAAC,CAAD,CAAL,CAASuC,GAAT,CAAa,UAACM,CAAD;AAAA,WAAOxC,MAAM,CAAC,IAAD,CAAb;AAAA,GAAb,CAAjB;AACA,MAAMyC,iBAAiB,GAAG1C,WAAW,CACjC,UAAC2C,OAAD,EAAUC,GAAV,EAAkB;AACd,QAAMC,YAAY,GAAG,IAAIC,KAAJ,CAAU,QAAV,EAAoB;AACrCC,MAAAA,OAAO,EAAE;AAD4B,KAApB,CAArB;;AAIA,QAAItD,KAAK,CAAC+C,QAAQ,CAACL,GAAT,CAAa;AAAA,UAAGa,OAAH,SAAGA,OAAH;AAAA,aAAiB,CAACA,OAAlB;AAAA,KAAb,CAAD,CAAT,EAAoD;AAChDT,MAAAA,SAAS,CAAC,EAAD,CAAT;AACAU,MAAAA,MAAM,CAACC,cAAP,CAAsBL,YAAtB,EAAoC,QAApC,EAA8C;AAC1CM,QAAAA,QAAQ,EAAE,KADgC;AAE1CC,QAAAA,KAAK,EAAE;AACHzC,UAAAA,IAAI,EAAJA,IADG;AAEHyC,UAAAA,KAAK,EAAE;AAFJ;AAFmC,OAA9C;AAQApB,MAAAA,QAAQ,CAACa,YAAD,EAAe,EAAf,CAAR;AACA;AACH;;AAED,QACIxB,WAAW,IACXvB,MAAM,CAAC0C,QAAQ,CAACG,OAAO,GAAGpC,SAAH,GAAeC,OAAvB,CAAR,CAAwCwC,OAAzC,CAAN,CAAwDK,OAAxD,CAAgE,IAAIC,IAAJ,EAAhE,CAFJ,EAGE;AACEf,MAAAA,SAAS,iCACFD,MADE;AAEL,SAACM,GAAD,aACIpB,MAAM,CAACnB,SAAS,CAACsC,OAAO,GAAGpC,SAAH,GAAeC,OAAvB,CAAV,CADV;AAFK,SAAT;AAMA;AACH;;AAED,QAAI,CAACY,cAAD,IAAmB,CAAC3B,KAAK,CAAC+C,QAAQ,CAACL,GAAT,CAAa;AAAA,UAAGa,OAAH,SAAGA,OAAH;AAAA,aAAiB,CAAC,CAACA,OAAnB;AAAA,KAAb,CAAD,CAA7B,EAAyE;AACrE;AACH;;AAED,QACI1B,iBAAiB,IACjBxB,MAAM,CAAC0C,QAAQ,CAACjC,SAAD,CAAR,CAAoByC,OAArB,CAAN,CAAoCO,MAApC,CAA2Cf,QAAQ,CAAChC,OAAD,CAAR,CAAkBwC,OAA7D,CAFJ,EAGE;AACET,MAAAA,SAAS,iCACFD,MADE;AAEL,SAACM,GAAD,aAAUpB,MAAM,CAACnB,SAAS,CAACsC,OAAO,GAAGpC,SAAH,GAAeC,OAAvB,CAAV,CAAhB,qBACIgB,MAAM,CAACnB,SAAS,CAACsC,OAAO,GAAGnC,OAAH,GAAaD,SAArB,CAAV,CADV;AAFK,SAAT;AAMA;AACH;;AAED,QAAIT,MAAM,CAAC0C,QAAQ,CAACjC,SAAD,CAAR,CAAoByC,OAArB,CAAN,CAAoCK,OAApC,CAA4Cb,QAAQ,CAAChC,OAAD,CAAR,CAAkBwC,OAA9D,CAAJ,EAA4E;AACxET,MAAAA,SAAS,iCACFD,MADE;AAEL,SAACM,GAAD,GAAOD,OAAO,aACLnB,MAAM,CAACgC,KADF,qBACahC,MAAM,CAACiC,GADpB,uEAELjC,MAAM,CAACiC,GAFF,qBAEWjC,MAAM,CAACgC,KAFlB;AAFT,SAAT;AAMA;AACH;;AAEDjB,IAAAA,SAAS,CAAC,EAAD,CAAT;AAEA,QAAMmB,iBAAiB,GAAGlB,QAAQ,CAACL,GAAT,CAAa;AAAA,UAAGa,OAAH,SAAGA,OAAH;AAAA,aAAiBA,OAAjB;AAAA,KAAb,EAAuCW,IAAvC,CAA4C,GAA5C,CAA1B;AAEAV,IAAAA,MAAM,CAACC,cAAP,CAAsBL,YAAtB,EAAoC,QAApC,EAA8C;AAC1CM,MAAAA,QAAQ,EAAE,KADgC;AAE1CC,MAAAA,KAAK,EAAE;AACHzC,QAAAA,IAAI,EAAJA,IADG;AAEHyC,QAAAA,KAAK,EAAEM;AAFJ;AAFmC,KAA9C;AAQA1B,IAAAA,QAAQ,CAACa,YAAD,EAAea,iBAAf,CAAR;AACH,GAzEgC,EA0EjC,CAACrC,WAAD,EAAcD,cAAd,EAA8BoB,QAA9B,EAAwCR,QAAxC,CA1EiC,CAArC;AA6EA,sBACI;AAAK,IAAA,SAAS,EAAExC,UAAU,CAAC,MAAD,EAASoB,SAAT,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKP,SAAS,CAAC8B,GAAV,CAAc,UAACS,GAAD,EAAMP,KAAN,EAAgB;AAC3B,QAAMM,OAAO,GAAGN,KAAK,KAAK,CAA1B;AAEA,QAAMuB,YAAY,GAAGlE,GAAG,CAAC+B,aAAD,EAAgBmB,GAAhB,CAAxB;AAEA,wBACI,oBAAC,iBAAD;AACI,MAAA,GAAG,YAAKjC,IAAL,mBAAkB0B,KAAlB,CADP;AAEI,MAAA,OAAO,EAAEV,OAFb;AAGI,MAAA,SAAS,EAAEnC,UAAU,CACjB;AAAE,iBAASmD,OAAX;AAAoB,iBAAS,CAACA,OAAD,IAAYd;AAAzC,OADiB,EAEjBjB,SAFiB,CAHzB;AAOI,MAAA,QAAQ,EAAEC,QAPd;AAQI,MAAA,SAAS,EAAEU,SAAS,IAAIoB,OAR5B;AASI,MAAA,QAAQ,EAAEV,WATd;AAUI,MAAA,WAAW,EAAEZ,WAVjB;AAWI,MAAA,OAAO,EAAEN,OAXb;AAYI,MAAA,SAAS,EAAEC,SAZf;AAaI,MAAA,SAAS,EAAEC,SAbf;AAcI,MAAA,QAAQ,EAAEC,QAdd;AAeI,MAAA,QAAQ,EAAEC,QAfd;AAgBI,MAAA,KAAK,EAAEzB,GAAG,CAACwC,UAAD,EAAaG,KAAb,CAhBd;AAiBI,MAAA,YAAY,EACR1C,OAAO,CAACiE,YAAD,CAAP,GACMlE,GAAG,CAACoC,UAAD,YAAgBc,GAAhB,yBAAuC,EAAvC,CADT,GAEMgB,YApBd;AAsBI,MAAA,KAAK,EAAElE,GAAG,CAACgC,MAAD,EAASkB,GAAT,EAAclD,GAAG,CAACoC,UAAD,YAAgBc,GAAhB,iBAAjB,CAtBd;AAuBI,MAAA,YAAY,EAAElD,GAAG,CAAC4C,MAAD,EAASM,GAAT,CAvBrB;AAwBI,MAAA,UAAU,EAAElD,GAAG,CAACoC,UAAD,EAAac,GAAb,CAxBnB;AAyBI,MAAA,QAAQ,EAAE,kBAACH,CAAD,EAAIoB,IAAJ,EAAa;AACnB,YAAK1C,QAAQ,IAAIS,OAAb,IAAyBY,QAAQ,CAACH,KAAD,CAAR,CAAgBW,OAAhB,KAA4Ba,IAAzD,EAA+D;AAC3DrB,UAAAA,QAAQ,CAACH,KAAD,CAAR,CAAgBW,OAAhB,GAA0Ba,IAA1B;AACAnB,UAAAA,iBAAiB,CAACC,OAAD,EAAUC,GAAV,CAAjB;AACH;AACJ,OA9BL;AA+BI,MAAA,gBAAgB,EAAE;AAAA,eACdL,SAAS,iCACFD,MADE;AAEL,WAACM,GAAD,GAAO;AAFF,WADK;AAAA;AAMlB;AArCJ;AAsCI,MAAA,UAAU,EAAElD,GAAG,CAACqC,UAAD,EAAaa,GAAb,CAtCnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AA0CH,GA/CA,CADL,CADJ;AAoDH;;AAEDnC,sBAAsB,CAACqD,YAAvB,GAAsC;AAClCpD,EAAAA,EAAE,uCAAgCb,QAAQ,EAAxC,CADgC;AAElCc,EAAAA,IAAI,8BAF8B;AAGlCC,EAAAA,SAAS,EAAE,EAHuB;AAIlCC,EAAAA,QAAQ,EAAE,KAJwB;AAKlCC,EAAAA,QAAQ,EAAE,KALwB;AAMlCS,EAAAA,SAAS,EAAE,KANuB;AAOlCwC,EAAAA,QAAQ,EAAE,KAPwB;AAQlCpC,EAAAA,OAAO,EAAE,KARyB;AASlCE,EAAAA,QAAQ,EAAE,KATwB;AAUlCd,EAAAA,OAAO,EAAE,KAVyB;AAWlCK,EAAAA,cAAc,EAAE,IAXkB;AAYlCC,EAAAA,WAAW,EAAE,IAZqB;AAalCL,EAAAA,SAAS,EAAE,KAbuB;AAclCC,EAAAA,SAAS,EAAE,IAduB;AAelCC,EAAAA,QAAQ,EAAE,IAfwB;AAgBlCC,EAAAA,QAAQ,EAAE,KAhBwB;AAiBlCG,EAAAA,iBAAiB,EAAE,KAjBe;AAkBlCG,EAAAA,aAAa,EAAE;AACX+B,IAAAA,KAAK,EAAE,EADI;AAEXC,IAAAA,GAAG,EAAE;AAFM,GAlBmB;AAsBlC/B,EAAAA,MAAM,EAAE;AACJ8B,IAAAA,KAAK,EAAE,EADH;AAEJC,IAAAA,GAAG,EAAE;AAFD,GAtB0B;AA0BlCjC,EAAAA,MAAM,EAAE;AACJgC,IAAAA,KAAK,EAAE,KADH;AAEJC,IAAAA,GAAG,EAAE;AAFD,GA1B0B;AA8BlC3B,EAAAA,UAAU,EAAE;AACR0B,IAAAA,KAAK,EAAE,EADC;AAERC,IAAAA,GAAG,EAAE;AAFG,GA9BsB;AAkClC1B,EAAAA,UAAU,EAAE;AACRyB,IAAAA,KAAK,EAAE,EADC;AAERC,IAAAA,GAAG,EAAE;AAFG,GAlCsB;AAsClCzB,EAAAA,QAAQ,EAAE,kBAACgC,KAAD,EAAQZ,KAAR,EAAkB,CAAE;AAtCI,CAAtC;;AAyCA,SAASa,eAAT,QAAkC;AAAA,MAAPC,GAAO,SAAPA,GAAO;AAC9B,SAAO;AACHtC,IAAAA,OAAO,EAAEsC,GAAG,CAACC,OAAJ,CAAYvC;AADlB,GAAP;AAGH;;AAED,eAAezB,OAAO,CAAC8D,eAAD,CAAP,CAAyBxD,sBAAzB,CAAf","sourcesContent":["import classNames from 'classnames';\r\nimport every from 'lodash/every';\r\nimport get from 'lodash/get';\r\nimport isEmpty from 'lodash/isEmpty';\r\nimport range from 'lodash/range';\r\nimport uniqueId from 'lodash/uniqueId';\r\nimport moment from 'moment';\r\nimport React, { useCallback, useRef, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport OwpDateTimePicker from './OwpDateTimePicker';\r\n\r\nconst DATE_KEYS = ['start', 'end'];\r\nconst DATES_LABELS_TXT_KR = ['시작월', '종료월'];\r\n\r\nconst START_NUM = 0;\r\nconst END_NUM = 1;\r\n\r\nfunction OwpDateTimePickerMulti({\r\n    id,\r\n    name,\r\n    className,\r\n    required,\r\n    fullDate,\r\n    useHour,\r\n    useSecond,\r\n    usePicker,\r\n    useClear,\r\n    useReset,\r\n    useForceChange,\r\n    useValidate,\r\n    useFilterSameDate,\r\n    autoFocus,\r\n    labels,\r\n    defaultValues,\r\n    values,\r\n    initNow,\r\n    isReset,\r\n    isSearch,\r\n    inputProps,\r\n    InputProps,\r\n    onChange,\r\n}) {\r\n    const useFullDate = fullDate || useSecond;\r\n    const labelsData = DATES_LABELS_TXT_KR.map((label, index) =>\r\n        get(labels, DATE_KEYS[index], label)\r\n    );\r\n\r\n    const [errors, setErrors] = useState({});\r\n    const datesRef = range(2).map((_) => useRef(null));\r\n    const handleChangeDates = useCallback(\r\n        (isStart, key) => {\r\n            const changedEvent = new Event('change', {\r\n                bubbles: true,\r\n            });\r\n\r\n            if (every(datesRef.map(({ current }) => !current))) {\r\n                setErrors({});\r\n                Object.defineProperty(changedEvent, 'target', {\r\n                    writable: false,\r\n                    value: {\r\n                        name,\r\n                        value: '',\r\n                    },\r\n                });\r\n\r\n                onChange(changedEvent, '');\r\n                return;\r\n            }\r\n\r\n            if (\r\n                useValidate &&\r\n                moment(datesRef[isStart ? START_NUM : END_NUM].current).isAfter(new Date())\r\n            ) {\r\n                setErrors({\r\n                    ...errors,\r\n                    [key]: `${\r\n                        labels[DATE_KEYS[isStart ? START_NUM : END_NUM]]\r\n                    } 이 오늘보다 클 수 없습니다.`,\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (!useForceChange && !every(datesRef.map(({ current }) => !!current))) {\r\n                return;\r\n            }\r\n\r\n            if (\r\n                useFilterSameDate &&\r\n                moment(datesRef[START_NUM].current).isSame(datesRef[END_NUM].current)\r\n            ) {\r\n                setErrors({\r\n                    ...errors,\r\n                    [key]: `${labels[DATE_KEYS[isStart ? START_NUM : END_NUM]]} 이 ${\r\n                        labels[DATE_KEYS[isStart ? END_NUM : START_NUM]]\r\n                    } 과 같습니다.`,\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (moment(datesRef[START_NUM].current).isAfter(datesRef[END_NUM].current)) {\r\n                setErrors({\r\n                    ...errors,\r\n                    [key]: isStart\r\n                        ? `${labels.start} 은 ${labels.end} 보다 클 수 없습니다.`\r\n                        : `${labels.end} 은 ${labels.start} 보다 커야 합니다.`,\r\n                });\r\n                return;\r\n            }\r\n\r\n            setErrors({});\r\n\r\n            const changedDatesValue = datesRef.map(({ current }) => current).join(',');\r\n\r\n            Object.defineProperty(changedEvent, 'target', {\r\n                writable: false,\r\n                value: {\r\n                    name,\r\n                    value: changedDatesValue,\r\n                },\r\n            });\r\n\r\n            onChange(changedEvent, changedDatesValue);\r\n        },\r\n        [useValidate, useForceChange, datesRef, onChange]\r\n    );\r\n\r\n    return (\r\n        <div className={classNames('flex', className)}>\r\n            {DATE_KEYS.map((key, index) => {\r\n                const isStart = index === 0;\r\n\r\n                const defaultValue = get(defaultValues, key);\r\n\r\n                return (\r\n                    <OwpDateTimePicker\r\n                        key={`${name}-item-${index}`}\r\n                        initNow={initNow}\r\n                        className={classNames(\r\n                            { 'mr-12': isStart, 'mr-20': !isStart && isSearch },\r\n                            className\r\n                        )}\r\n                        required={required}\r\n                        autoFocus={autoFocus && isStart}\r\n                        fullDate={useFullDate}\r\n                        useValidate={useValidate}\r\n                        useHour={useHour}\r\n                        useSecond={useSecond}\r\n                        usePicker={usePicker}\r\n                        useClear={useClear}\r\n                        useReset={useReset}\r\n                        label={get(labelsData, index)}\r\n                        defaultValue={\r\n                            isEmpty(defaultValue)\r\n                                ? get(inputProps, `${key}[\"defaultValue\"]`, '')\r\n                                : defaultValue\r\n                        }\r\n                        value={get(values, key, get(inputProps, `${key}[\"value\"]`))}\r\n                        errorMessage={get(errors, key)}\r\n                        inputProps={get(inputProps, key)}\r\n                        onChange={(_, date) => {\r\n                            if ((useReset && isReset) || datesRef[index].current !== date) {\r\n                                datesRef[index].current = date;\r\n                                handleChangeDates(isStart, key);\r\n                            }\r\n                        }}\r\n                        handleResetError={() =>\r\n                            setErrors({\r\n                                ...errors,\r\n                                [key]: '',\r\n                            })\r\n                        }\r\n                        /*eslint-disable-next-line*/\r\n                        InputProps={get(InputProps, key)}\r\n                    />\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n\r\nOwpDateTimePickerMulti.defaultProps = {\r\n    id: `owp-date-time-picker-multi-${uniqueId()}`,\r\n    name: `owp-date-time-picker-multi`,\r\n    className: '',\r\n    required: false,\r\n    fullDate: false,\r\n    autoFocus: false,\r\n    autoMove: false,\r\n    initNow: false,\r\n    isSearch: false,\r\n    useHour: false,\r\n    useForceChange: true,\r\n    useValidate: true,\r\n    useSecond: false,\r\n    usePicker: true,\r\n    useClear: true,\r\n    useReset: false,\r\n    useFilterSameDate: false,\r\n    defaultValues: {\r\n        start: '',\r\n        end: '',\r\n    },\r\n    values: {\r\n        start: '',\r\n        end: '',\r\n    },\r\n    labels: {\r\n        start: '시작일',\r\n        end: '종료일',\r\n    },\r\n    inputProps: {\r\n        start: {},\r\n        end: {},\r\n    },\r\n    InputProps: {\r\n        start: {},\r\n        end: {},\r\n    },\r\n    onChange: (event, value) => {},\r\n};\r\n\r\nfunction mapStateToProps({ owp }) {\r\n    return {\r\n        isReset: owp.wrapper.isReset,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OwpDateTimePickerMulti);\r\n"]},"metadata":{},"sourceType":"module"}