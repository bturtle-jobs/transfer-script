{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _createForOfIteratorHelper from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport _asyncToGenerator from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Projects\\\\Trunks\\\\OWP-GIT\\\\owp-fe\\\\src\\\\main\\\\content\\\\include\\\\Pop_C0202002_01.js\";\nimport { OwpTextField, OwpButton, OwpSelectField, OwpDialog, OwpMessage, OwpTreeGrid, OwpSearchDateTimePickerMulti, OwpSearchSelectField, OwpSearchTextField, OwpDateTimePickerMulti } from 'owp/wrapper';\nimport Icon from '@material-ui/core/Icon';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport React, { Component } from 'react';\nimport Formsy from 'formsy-react';\nimport { mutate, query } from 'owp/api';\nimport * as TGEvent from 'owp/TGEvent';\nimport { setGridData, setRowAttribute, restoreGridSelect, setRowAttributes } from 'main/GridUtill';\nimport { difference } from '../../CommonUtils';\nvar GRID_ID = 'C0202010';\n\nvar DialogReweighing = /*#__PURE__*/function (_Component) {\n  _inherits(DialogReweighing, _Component);\n\n  var _super = _createSuper(DialogReweighing);\n\n  function DialogReweighing(props) {\n    var _this;\n\n    _classCallCheck(this, DialogReweighing);\n\n    _this = _super.call(this, props);\n\n    _this.handleStoreSelectedRow = function (is, row) {\n      if (is) {\n        _this.setState(function (state) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            newSopConfig: state.newSopConfig.add(row['OWP_SOP.SOPSEQ'])\n          });\n        });\n      } else {\n        _this.setState(function (state) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            newSopConfig: state.newSopConfig.size > 1 ? state.newSopConfig.delete(row['OWP_SOP.SOPSEQ']) : new Set()\n          });\n        });\n      }\n    };\n\n    _this.customSelectEvent = function (callbackfunc) {\n      window.TGSetEvent('OnSelect', GRID_ID, function (G, row) {\n        setTimeout(function () {\n          if (row['Selected'] === 1) {\n            return callbackfunc(true, row);\n          } else {\n            return callbackfunc(false, row);\n          }\n        }, 100);\n      });\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    _this.openDialogCheck = function () {\n      _this.setState({\n        isDialogCheckOpen: true\n      });\n\n      _this.setState({\n        popMessage: '저장하시겠습니까?'\n      });\n    };\n\n    _this.closeDialogCheck = function () {\n      _this.setState({\n        isDialogCheckOpen: false\n      });\n    };\n\n    _this.closeDialog = function () {\n      _this.setState({\n        isDialogOpen: false\n      });\n\n      _this.clearState();\n\n      _this.owpDialog.handleClose();\n    };\n\n    _this.clickSearch = function () {\n      _this.loadGridData();\n    };\n\n    _this.clearState = function () {\n      _this.setState(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          newSopConfig: new Set(),\n          mapOldSopConfig: new Map()\n        });\n      });\n    };\n\n    _this.clickReset = function () {};\n\n    _this.loadSopConfig = function () {\n      query({\n        url: 'listOwpMbrProcessSopByUnitProcess',\n        params: {\n          jsondata: JSON.stringify({\n            'OWP_MBR_PROCESS_SOP.PROCESSSEQ': _this.state.UNITPROCESSID + ''\n          })\n        }\n      }).then(function (res) {\n        if (res) {\n          var setSopConfig = new Set();\n          var mapSopConfig = new Map();\n          res.forEach(function (item) {\n            setSopConfig.add(item['OWP_MBR_PROCESS_SOP.SOPSEQ']);\n            mapSopConfig.set(item['OWP_MBR_PROCESS_SOP.SOPSEQ'], item['OWP_MBR_PROCESS_SOP.PROCESSSOP_SEQ']);\n          });\n\n          _this.setState(function (state) {\n            return _objectSpread(_objectSpread({}, state), {}, {\n              newSopConfig: new Set(setSopConfig),\n              mapOldSopConfig: mapSopConfig\n            });\n          });\n        }\n      }).catch(function (error) {\n        console.error(error);\n      });\n    };\n\n    _this.loadGridData = function () {\n      query({\n        url: 'listOwpSopInPopC0202002',\n        params: {\n          jsondata: JSON.stringify({\n            'OWP_SOP.SOPNUM': _this.state['OWP_SOP.SOPNUM'] ? _this.state['OWP_SOP.SOPNUM'] + '' : '',\n            'OWP_SOP.SOPTITLE_KR': _this.state['OWP_SOP.SOPTITLE_KR'] ? _this.state['OWP_SOP.SOPTITLE_KR'] + '' : ''\n          })\n        }\n      }).then(function (res) {\n        setGridData(GRID_ID, res);\n\n        _this.setSelectedState();\n      }).catch(function (error) {\n        console.error(error);\n      });\n    };\n\n    _this.setSelectedState = function () {\n      var G = TGEvent.getGridByID(GRID_ID);\n\n      if (G) {\n        var _rows = Object.values(G['Rows']).filter(function (item) {\n          return item.Kind == 'Data';\n        });\n\n        _rows.forEach(function (row) {\n          if (_this.state.newSopConfig.has(row['OWP_SOP.SOPSEQ'])) {\n            G.SelectRow(row, 1, 0);\n          }\n        });\n      }\n    };\n\n    _this.clickUpdate = function () {\n      _this.onSave('START'); // this.closeDialog();\n\n    };\n\n    _this.onSave = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(type) {\n        var data, _iterator, _step, item, _iterator2, _step2, _step2$value, key, value;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = []; //add new config\n\n                _iterator = _createForOfIteratorHelper(_this.state.newSopConfig.values());\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    item = _step.value;\n\n                    if (!_this.state.mapOldSopConfig.has(item)) {\n                      data.push({\n                        STATUS: 'create',\n                        PROCESSSEQ: _this.state.UNITPROCESSID + '',\n                        SOPSEQ: item + '',\n                        FLAG: 'Y'\n                      });\n                    }\n                  } //remove config\n\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                _iterator2 = _createForOfIteratorHelper(_this.state.mapOldSopConfig);\n\n                try {\n                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                    _step2$value = _slicedToArray(_step2.value, 2), key = _step2$value[0], value = _step2$value[1];\n\n                    if (!_this.state.newSopConfig.has(key)) {\n                      data.push({\n                        STATUS: 'delete',\n                        PROCESSSEQ: _this.state.UNITPROCESSID + '',\n                        SOPSEQ: key + '',\n                        FLAG: 'Y',\n                        PROCESSSOP_SEQ: value\n                      });\n                    }\n                  }\n                } catch (err) {\n                  _iterator2.e(err);\n                } finally {\n                  _iterator2.f();\n                }\n\n                console.log('-------->', data);\n                mutate({\n                  url: '/processOwpMbrProcessSop',\n                  data: data\n                }).then(function (res) {\n                  _this.closeDialogCheck();\n\n                  _this.closeDialog();\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.owpDialog = React.createRef();\n    _this.state = {\n      FLAG: 'Y',\n      isDialogCheckOpen: false,\n      isDialogOpen: false,\n      popMessage: '저장하시겠습니까',\n      UNITPROCESSID: 139,\n      mapOldSopConfig: new Map(),\n      newSopConfig: new Set()\n    };\n    return _this;\n  }\n\n  _createClass(DialogReweighing, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadSopConfig();\n      this.customSelectEvent(this.handleStoreSelectedRow);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(OwpDialog, {\n        title: \"\\uC0DD\\uC0B0\\uACC4\\uD68D \\uC124\\uC815\",\n        callbackFunction: this.createDialogOpen,\n        dialogButton: \"\\uCD94\\uAC00\",\n        dialogActions: /*#__PURE__*/React.createElement(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"w-full center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(OwpButton, {\n          color: \"secondary\",\n          variant: \"contained\",\n          onClick: this.openDialogCheck,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 29\n          }\n        }, \"\\uB4F1\\uB85D\"), /*#__PURE__*/React.createElement(OwpButton, {\n          color: \"secondary\",\n          variant: \"outlined\",\n          onClick: this.closeDialog,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 29\n          }\n        }, \"\\uCDE8\\uC18C\"))),\n        innerRef: function innerRef(ref) {\n          return _this2.owpDialog = ref;\n        },\n        width: \"800px\",\n        height: \"auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(OwpDialog, {\n        onOpen: this.state.isDialogCheckOpen,\n        dialogActions: /*#__PURE__*/React.createElement(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"w-full center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(OwpButton, {\n          color: \"secondary\",\n          variant: \"contained\",\n          onClick: this.clickUpdate,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 37\n          }\n        }, \"\\uC800\\uC7A5\"), /*#__PURE__*/React.createElement(OwpButton, {\n          color: \"secondary\",\n          variant: \"outlined\",\n          onClick: this.closeDialogCheck,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 37\n          }\n        }, \"\\uCDE8\\uC18C\"))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 25\n        }\n      }, this.state.popMessage)), /*#__PURE__*/React.createElement(Formsy, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 pd0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"portlet light mgb0\",\n        style: {\n          paddingTop: '0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"portlet-title\",\n        style: {\n          minHeight: '0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"caption\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"ico_m01 c04\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 49\n        }\n      }, \"insert_chart\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"font-dark bold uppercase\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 49\n        }\n      }, ' ', \"\\uC791\\uC5C5\\uD45C\\uC900\\uAD00\\uB9AC(SOP) \\uC870\\uD68C\", ' '), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"caption-helper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 49\n        }\n      }, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex justify-end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(OwpButton, {\n        color: \"secondary\",\n        variant: \"contained\",\n        onClick: this.clickSearch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 49\n        }\n      }, \"\\uAC80\\uC0C9\"), /*#__PURE__*/React.createElement(OwpButton, {\n        color: \"secondary\",\n        variant: \"outlined\",\n        onClick: this.clickReset,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 49\n        }\n      }, \"\\uCD08\\uAE30\\uD654\"))), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-advance tlw5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        className: \"left\",\n        width: \"150\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 53\n        }\n      }, \"\\uBD84\\uB958 \\xB7 SOP\\uBA85\"), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(OwpTextField, {\n        onChange: this.handleChange,\n        id: \"OWP_SOP.SOPNUM\",\n        name: \"OWP_SOP.SOPNUM\",\n        style: {\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 57\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"left\",\n        width: \"150\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 53\n        }\n      }, \"\\uBB38\\uC11C\\uBC88\\uD638\"), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(OwpTextField, {\n        onChange: this.handleChange,\n        id: \"OWP_SOP.SOPTITLE_KR\",\n        name: \"OWP_SOP.SOPTITLE_KR\",\n        style: {\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 57\n        }\n      })))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 pd0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"portlet light mgb0\",\n        style: {\n          paddingTop: '0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"portlet-title\",\n        style: {\n          minHeight: '0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"caption\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"ico_m01 c04\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 49\n        }\n      }, \"insert_chart\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"font-dark bold uppercase\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 49\n        }\n      }, ' ', \"\\uC791\\uC5C5\\uD45C\\uC900\\uAD00\\uB9AC(SOP) \\uC124\\uC815\", ' '), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"caption-helper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 49\n        }\n      }, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex justify-end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 45\n        }\n      })), /*#__PURE__*/React.createElement(OwpTreeGrid, {\n        id: \"C0202010\",\n        LayoutUrl: '/assets/data/C0202010Def.xml',\n        width: \"100%\",\n        height: \"30vh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 41\n        }\n      }))))))));\n    }\n  }]);\n\n  return DialogReweighing;\n}(Component);\n\nexport default DialogReweighing;","map":{"version":3,"sources":["C:/Projects/Trunks/OWP-GIT/owp-fe/src/main/content/include/Pop_C0202002_01.js"],"names":["OwpTextField","OwpButton","OwpSelectField","OwpDialog","OwpMessage","OwpTreeGrid","OwpSearchDateTimePickerMulti","OwpSearchSelectField","OwpSearchTextField","OwpDateTimePickerMulti","Icon","TextField","InputAdornment","React","Component","Formsy","mutate","query","TGEvent","setGridData","setRowAttribute","restoreGridSelect","setRowAttributes","difference","GRID_ID","DialogReweighing","props","handleStoreSelectedRow","is","row","setState","state","newSopConfig","add","size","delete","Set","customSelectEvent","callbackfunc","window","TGSetEvent","G","setTimeout","handleChange","event","target","name","value","openDialogCheck","isDialogCheckOpen","popMessage","closeDialogCheck","closeDialog","isDialogOpen","clearState","owpDialog","handleClose","clickSearch","loadGridData","mapOldSopConfig","Map","clickReset","loadSopConfig","url","params","jsondata","JSON","stringify","UNITPROCESSID","then","res","setSopConfig","mapSopConfig","forEach","item","set","catch","error","console","setSelectedState","getGridByID","_rows","Object","values","filter","Kind","has","SelectRow","clickUpdate","onSave","type","data","push","STATUS","PROCESSSEQ","SOPSEQ","FLAG","key","PROCESSSOP_SEQ","log","createRef","createDialogOpen","ref","width","paddingTop","minHeight"],"mappings":"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","sourcesContent":["import {\r\n    OwpTextField,\r\n    OwpButton,\r\n    OwpSelectField,\r\n    OwpDialog,\r\n    OwpMessage,\r\n    OwpTreeGrid,\r\n    OwpSearchDateTimePickerMulti,\r\n    OwpSearchSelectField,\r\n    OwpSearchTextField,\r\n    OwpDateTimePickerMulti,\r\n} from 'owp/wrapper';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport React, { Component } from 'react';\r\nimport Formsy from 'formsy-react';\r\nimport { mutate, query } from 'owp/api';\r\nimport * as TGEvent from 'owp/TGEvent';\r\nimport { setGridData, setRowAttribute, restoreGridSelect, setRowAttributes } from 'main/GridUtill';\r\nimport { difference } from '../../CommonUtils';\r\n\r\nconst GRID_ID = 'C0202010';\r\nclass DialogReweighing extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.owpDialog = React.createRef();\r\n        this.state = {\r\n            FLAG: 'Y',\r\n            isDialogCheckOpen: false,\r\n            isDialogOpen: false,\r\n            popMessage: '저장하시겠습니까',\r\n            UNITPROCESSID: 139,\r\n            mapOldSopConfig: new Map(),\r\n            newSopConfig: new Set(),\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadSopConfig();\r\n        this.customSelectEvent(this.handleStoreSelectedRow);\r\n    }\r\n\r\n    handleStoreSelectedRow = (is, row) => {\r\n        if (is) {\r\n            this.setState((state) => {\r\n                return {\r\n                    ...state,\r\n                    newSopConfig: state.newSopConfig.add(row['OWP_SOP.SOPSEQ']),\r\n                };\r\n            });\r\n        } else {\r\n            this.setState((state) => {\r\n                return {\r\n                    ...state,\r\n                    newSopConfig:\r\n                        state.newSopConfig.size > 1\r\n                            ? state.newSopConfig.delete(row['OWP_SOP.SOPSEQ'])\r\n                            : new Set(),\r\n                };\r\n            });\r\n        }\r\n    };\r\n\r\n    customSelectEvent = (callbackfunc) => {\r\n        window.TGSetEvent('OnSelect', GRID_ID, function (G, row) {\r\n            setTimeout(function () {\r\n                if (row['Selected'] === 1) {\r\n                    return callbackfunc(true, row);\r\n                } else {\r\n                    return callbackfunc(false, row);\r\n                }\r\n            }, 100);\r\n        });\r\n    };\r\n\r\n    handleChange = (event) => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    openDialogCheck = () => {\r\n        this.setState({ isDialogCheckOpen: true });\r\n        this.setState({ popMessage: '저장하시겠습니까?' });\r\n    };\r\n\r\n    closeDialogCheck = () => {\r\n        this.setState({ isDialogCheckOpen: false });\r\n    };\r\n\r\n    closeDialog = () => {\r\n        this.setState({ isDialogOpen: false });\r\n        this.clearState();\r\n        this.owpDialog.handleClose();\r\n    };\r\n\r\n    clickSearch = () => {\r\n        this.loadGridData();\r\n    };\r\n\r\n    clearState = () => {\r\n        this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                newSopConfig: new Set(),\r\n                mapOldSopConfig: new Map(),\r\n            };\r\n        });\r\n    };\r\n\r\n    clickReset = () => {};\r\n\r\n    loadSopConfig = () => {\r\n        query({\r\n            url: 'listOwpMbrProcessSopByUnitProcess',\r\n            params: {\r\n                jsondata: JSON.stringify({\r\n                    'OWP_MBR_PROCESS_SOP.PROCESSSEQ': this.state.UNITPROCESSID + '',\r\n                }),\r\n            },\r\n        })\r\n            .then((res) => {\r\n                if (res) {\r\n                    let setSopConfig = new Set();\r\n                    let mapSopConfig = new Map();\r\n                    res.forEach((item) => {\r\n                        setSopConfig.add(item['OWP_MBR_PROCESS_SOP.SOPSEQ']);\r\n                        mapSopConfig.set(\r\n                            item['OWP_MBR_PROCESS_SOP.SOPSEQ'],\r\n                            item['OWP_MBR_PROCESS_SOP.PROCESSSOP_SEQ']\r\n                        );\r\n                    });\r\n                    this.setState((state) => {\r\n                        return {\r\n                            ...state,\r\n                            newSopConfig: new Set(setSopConfig),\r\n                            mapOldSopConfig: mapSopConfig,\r\n                        };\r\n                    });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n    };\r\n\r\n    loadGridData = () => {\r\n        query({\r\n            url: 'listOwpSopInPopC0202002',\r\n            params: {\r\n                jsondata: JSON.stringify({\r\n                    'OWP_SOP.SOPNUM': this.state['OWP_SOP.SOPNUM']\r\n                        ? this.state['OWP_SOP.SOPNUM'] + ''\r\n                        : '',\r\n                    'OWP_SOP.SOPTITLE_KR': this.state['OWP_SOP.SOPTITLE_KR']\r\n                        ? this.state['OWP_SOP.SOPTITLE_KR'] + ''\r\n                        : '',\r\n                }),\r\n            },\r\n        })\r\n            .then((res) => {\r\n                setGridData(GRID_ID, res);\r\n                this.setSelectedState();\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n    };\r\n\r\n    setSelectedState = () => {\r\n        const G = TGEvent.getGridByID(GRID_ID);\r\n        if (G) {\r\n            const _rows = Object.values(G['Rows']).filter((item) => item.Kind == 'Data');\r\n            _rows.forEach((row) => {\r\n                if (this.state.newSopConfig.has(row['OWP_SOP.SOPSEQ'])) {\r\n                    G.SelectRow(row, 1, 0);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    clickUpdate = () => {\r\n        this.onSave('START');\r\n        // this.closeDialog();\r\n    };\r\n\r\n    onSave = async (type) => {\r\n        let data = [];\r\n        //add new config\r\n        for (let item of this.state.newSopConfig.values()) {\r\n            if (!this.state.mapOldSopConfig.has(item)) {\r\n                data.push({\r\n                    STATUS: 'create',\r\n                    PROCESSSEQ: this.state.UNITPROCESSID + '',\r\n                    SOPSEQ: item + '',\r\n                    FLAG: 'Y',\r\n                });\r\n            }\r\n        }\r\n        //remove config\r\n        for (var [key, value] of this.state.mapOldSopConfig) {\r\n            if (!this.state.newSopConfig.has(key)) {\r\n                data.push({\r\n                    STATUS: 'delete',\r\n                    PROCESSSEQ: this.state.UNITPROCESSID + '',\r\n                    SOPSEQ: key + '',\r\n                    FLAG: 'Y',\r\n                    PROCESSSOP_SEQ: value,\r\n                });\r\n            }\r\n        }\r\n\r\n        console.log('-------->', data);\r\n\r\n        mutate({\r\n            url: '/processOwpMbrProcessSop',\r\n            data,\r\n        }).then((res) => {\r\n            this.closeDialogCheck();\r\n            this.closeDialog();\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <OwpDialog\r\n                title=\"생산계획 설정\"\r\n                callbackFunction={this.createDialogOpen}\r\n                dialogButton=\"추가\"\r\n                dialogActions={\r\n                    <React.Fragment>\r\n                        <div className=\"w-full center\">\r\n                            <OwpButton\r\n                                color=\"secondary\"\r\n                                variant=\"contained\"\r\n                                onClick={this.openDialogCheck}\r\n                            >\r\n                                등록\r\n                            </OwpButton>\r\n                            <OwpButton\r\n                                color=\"secondary\"\r\n                                variant=\"outlined\"\r\n                                onClick={this.closeDialog}\r\n                            >\r\n                                취소\r\n                            </OwpButton>\r\n                        </div>\r\n                    </React.Fragment>\r\n                }\r\n                innerRef={(ref) => (this.owpDialog = ref)}\r\n                width=\"800px\"\r\n                height=\"auto\"\r\n            >\r\n                <React.Fragment>\r\n                    <OwpDialog\r\n                        onOpen={this.state.isDialogCheckOpen}\r\n                        dialogActions={\r\n                            <React.Fragment>\r\n                                <div className=\"w-full center\">\r\n                                    <OwpButton\r\n                                        color=\"secondary\"\r\n                                        variant=\"contained\"\r\n                                        onClick={this.clickUpdate}\r\n                                    >\r\n                                        저장\r\n                                    </OwpButton>\r\n                                    <OwpButton\r\n                                        color=\"secondary\"\r\n                                        variant=\"outlined\"\r\n                                        onClick={this.closeDialogCheck}\r\n                                    >\r\n                                        취소\r\n                                    </OwpButton>\r\n                                </div>\r\n                            </React.Fragment>\r\n                        }\r\n                    >\r\n                        <React.Fragment>{this.state.popMessage}</React.Fragment>\r\n                    </OwpDialog>\r\n                    <Formsy>\r\n                        <div style={{ width: '100%' }}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-lg-12 pd0\">\r\n                                    <div className=\"portlet light mgb0\" style={{ paddingTop: '0' }}>\r\n                                        <div className=\"portlet-title\" style={{ minHeight: '0' }}>\r\n                                            <div className=\"caption\">\r\n                                                <Icon className=\"ico_m01 c04\">insert_chart</Icon>\r\n                                                <span className=\"font-dark bold uppercase\">\r\n                                                    {' '}\r\n                                                    작업표준관리(SOP) 조회{' '}\r\n                                                </span>\r\n                                                <span className=\"caption-helper\"> </span>\r\n                                            </div>\r\n                                            <div className=\"flex justify-end\">\r\n                                                <OwpButton\r\n                                                    color=\"secondary\"\r\n                                                    variant=\"contained\"\r\n                                                    onClick={this.clickSearch}\r\n                                                >\r\n                                                    검색\r\n                                                </OwpButton>\r\n                                                <OwpButton\r\n                                                    color=\"secondary\"\r\n                                                    variant=\"outlined\"\r\n                                                    onClick={this.clickReset}\r\n                                                >\r\n                                                    초기화\r\n                                                </OwpButton>\r\n                                            </div>\r\n                                        </div>\r\n                                        <table className=\"table table-bordered table-advance tlw5\">\r\n                                            <tbody>\r\n                                                <tr>\r\n                                                    <th className=\"left\" width=\"150\">\r\n                                                        분류 · SOP명\r\n                                                    </th>\r\n                                                    <td className=\"left\">\r\n                                                        <OwpTextField\r\n                                                            onChange={this.handleChange}\r\n                                                            id=\"OWP_SOP.SOPNUM\"\r\n                                                            name=\"OWP_SOP.SOPNUM\"\r\n                                                            style={{ width: '100%' }}\r\n                                                        />\r\n                                                    </td>\r\n                                                    <th className=\"left\" width=\"150\">\r\n                                                        문서번호\r\n                                                    </th>\r\n                                                    <td className=\"left\">\r\n                                                        <OwpTextField\r\n                                                            onChange={this.handleChange}\r\n                                                            id=\"OWP_SOP.SOPTITLE_KR\"\r\n                                                            name=\"OWP_SOP.SOPTITLE_KR\"\r\n                                                            style={{ width: '100%' }}\r\n                                                        />\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"row\">\r\n                                <div className=\"col-lg-12 pd0\">\r\n                                    <div className=\"portlet light mgb0\" style={{ paddingTop: '0' }}>\r\n                                        <div className=\"portlet-title\" style={{ minHeight: '0' }}>\r\n                                            <div className=\"caption\">\r\n                                                <Icon className=\"ico_m01 c04\">insert_chart</Icon>\r\n                                                <span className=\"font-dark bold uppercase\">\r\n                                                    {' '}\r\n                                                    작업표준관리(SOP) 설정{' '}\r\n                                                </span>\r\n                                                <span className=\"caption-helper\"> </span>\r\n                                            </div>\r\n                                            <div className=\"flex justify-end\"></div>\r\n                                        </div>\r\n                                        <OwpTreeGrid\r\n                                            id=\"C0202010\"\r\n                                            LayoutUrl={'/assets/data/C0202010Def.xml'}\r\n                                            width=\"100%\"\r\n                                            height=\"30vh\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Formsy>\r\n                </React.Fragment>\r\n            </OwpDialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DialogReweighing;\r\n"]},"metadata":{},"sourceType":"module"}